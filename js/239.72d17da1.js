"use strict";(self["webpackChunkresep_bunda"]=self["webpackChunkresep_bunda"]||[]).push([[239],{1285:(e,n,t)=>{var a=t(7908),r=t(1400),u=t(6244);e.exports=function(e){var n=a(this),t=u(n),l=arguments.length,i=r(l>1?arguments[1]:void 0,t),o=l>2?arguments[2]:void 0,c=void 0===o?t:r(o,t);while(c>i)n[i++]=e;return n}},3671:(e,n,t)=>{var a=t(9662),r=t(7908),u=t(8361),l=t(6244),i=TypeError,o=function(e){return function(n,t,o,c){a(t);var s=r(n),v=u(s),d=l(s),f=e?d-1:0,m=e?-1:1;if(o<2)while(1){if(f in v){c=v[f],f+=m;break}if(f+=m,e?f<0:d<=f)throw i("Reduce of empty array with no initial value")}for(;e?f>=0:d>f;f+=m)f in v&&(c=t(c,v[f],f,s));return c}};e.exports={left:o(!1),right:o(!0)}},3009:(e,n,t)=>{var a=t(7854),r=t(7293),u=t(1702),l=t(1340),i=t(3111).trim,o=t(1361),c=a.parseInt,s=a.Symbol,v=s&&s.iterator,d=/^[+-]?0x/i,f=u(d.exec),m=8!==c(o+"08")||22!==c(o+"0x16")||v&&!r((function(){c(Object(v))}));e.exports=m?function(e,n){var t=i(l(e));return c(t,n>>>0||(f(d,t)?16:10))}:c},3290:(e,n,t)=>{var a=t(2109),r=t(1285),u=t(1223);a({target:"Array",proto:!0},{fill:r}),u("fill")},5827:(e,n,t)=>{var a=t(2109),r=t(3671).left,u=t(2133),l=t(7392),i=t(5268),o=!i&&l>79&&l<83,c=o||!u("reduce");a({target:"Array",proto:!0,forced:c},{reduce:function(e){var n=arguments.length;return r(this,e,n,n>1?arguments[1]:void 0)}})},1058:(e,n,t)=>{var a=t(2109),r=t(3009);a({global:!0,forced:parseInt!==r},{parseInt:r})},1239:(e,n,t)=>{t.r(n),t.d(n,{default:()=>b});var a=t(124),r=t(3144),u=t(8534),l=(t(7327),t(1539),t(1249),t(6699),t(2023),t(7941),t(3290),t(1058),t(2564),t(8862),t(2222),t(3112),t(6647),t(3710),t(9714),t(5827),t(8309),t(7658),t(6252)),i=t(2262),o=t(3577),c=t(86),s=t(6100),v=t(2201),d=t(316),f=t(5856),m={key:0,class:"image-grid"},w={key:0},p={class:"timer-badge"},U=["innerHTML"],g={key:0},k={key:1},S=["src"],h={class:"options"},_={key:1};const x={__name:"HalamanUjianUmum",setup:function(e){var n=(0,s.ad)(f.H),t=(0,d.v0)(f.H),x=(0,v.yj)(),W=(0,v.tv)(),b=(0,i.iH)(x.params.jadwalId),y=(0,i.iH)([]),j=(0,i.iH)(0),I=(0,i.iH)([]),H=(0,i.iH)(0),D=(0,i.iH)({isOpen:!1,message:"",duration:2e3,color:"success"}),J=(0,i.iH)(0),N=(0,i.iH)(null),P=(0,i.iH)(!1),C=(0,i.iH)(!1),T=function(){var e=(0,u.Z)((0,a.Z)().mark((function e(){var u,l,i,o,c,v,d;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(u=t.currentUser,!u){e.next=37;break}if(b.value){e.next=5;break}return console.error("jadwalId is undefined"),e.abrupt("return");case 5:return e.prev=5,e.next=8,(0,s.QT)((0,s.JU)(n,"examResults/".concat(u.uid,"/results"),b.value));case 8:if(l=e.sent,!l.exists()){e.next=13;break}return P.value=!0,H.value=l.data().score,e.abrupt("return");case 13:return e.next=15,(0,s.QT)((0,s.JU)(n,"jadwalcpns",b.value));case 15:if(i=e.sent,!i.exists()){e.next=29;break}return o=i.data(),e.next=20,(0,s.PL)((0,s.hJ)(n,"soalcpns"));case 20:c=e.sent,y.value=c.docs.map((function(e){return(0,r.Z)({id:e.id},e.data())})).filter((function(e){return o.soal&&o.soal.includes(e.id)})),v=JSON.parse(localStorage.getItem("answers_".concat(b.value))),I.value=v||new Array(y.value.length).fill(""),d=localStorage.getItem("timer_".concat(b.value)),J.value=d?parseInt(d,10):60*o.durasi,q(),e.next=30;break;case 29:console.error("jadwalDoc does not exist");case 30:e.next=35;break;case 32:e.prev=32,e.t0=e["catch"](5),console.error("Error fetching documents:",e.t0);case 35:e.next=38;break;case 37:console.error("User is not authenticated");case 38:case"end":return e.stop()}}),e,null,[[5,32]])})));return function(){return e.apply(this,arguments)}}(),q=function(){N.value=setInterval((function(){J.value>0?(J.value--,localStorage.setItem("timer_".concat(b.value),J.value),localStorage.setItem("answers_".concat(b.value),JSON.stringify(I.value))):(clearInterval(N.value),M())}),1e3)},A=function(e){var n=Math.floor(e/60),t=e%60;return"".concat(n.toString().padStart(2,"0"),":").concat(t.toString().padStart(2,"0"))},O=function(){j.value<y.value.length-1?j.value++:(Q(),j.value++,M())},Q=function(){var e=y.value.reduce((function(e,n,t){return n.correctAnswer===I.value[t]?e+1:e}),0);H.value=Math.round(e/y.value.length*100)},Z=function(e){I.value[j.value]=e,localStorage.setItem("answers_".concat(b.value),JSON.stringify(I.value))},M=function(){var e=(0,u.Z)((0,a.Z)().mark((function e(){var r,u,l,i,o,c,v,d,f;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.currentUser,!r){e.next=37;break}return Q(),e.prev=3,e.next=6,(0,s.pl)((0,s.JU)(n,"examResults/".concat(r.uid,"/results"),b.value),{userId:r.uid,jadwalId:b.value,score:H.value,createdAt:(0,s.Bt)()});case 6:return e.next=8,(0,s.QT)((0,s.JU)(n,"users",r.uid));case 8:return u=e.sent,l=u.data(),e.next=12,(0,s.QT)((0,s.JU)(n,"jadwalcpns",b.value));case 12:return i=e.sent,o=i.data(),e.next=16,(0,s.QT)((0,s.JU)(n,"mataPelajaran",o.mataPelajaran));case 16:return c=e.sent,v=c.data(),e.next=20,(0,s.QT)((0,s.JU)(n,"kelas",o.kelas));case 20:return d=e.sent,f=d.data(),e.next=24,(0,s.pl)((0,s.JU)(n,"nilaiUjian",b.value),{userName:l.fullName,kelasName:f.name,mataPelajaranName:v.name,score:H.value,createdAt:(0,s.Bt)()});case 24:L("Ujian berhasil disubmit!","success"),P.value=!0,localStorage.removeItem("timer_".concat(b.value)),localStorage.removeItem("answers_".concat(b.value)),W.push({name:"siswa"}),e.next=35;break;case 31:e.prev=31,e.t0=e["catch"](3),console.error("Error submitting exam:",e.t0),L("Gagal submit ujian.","danger");case 35:e.next=38;break;case 37:L("Pengguna tidak terautentikasi.","danger");case 38:case"end":return e.stop()}}),e,null,[[3,31]])})));return function(){return e.apply(this,arguments)}}(),z=function(){C.value=!0},G=function(){C.value=!1},E=function(e){j.value=e,G()},L=function(e,n){D.value={isOpen:!0,message:e,duration:2e3,color:n}};(0,l.bv)((function(){T(),window.history.pushState(null,"",window.location.href),window.addEventListener("popstate",Y)})),(0,l.Ah)((function(){N.value&&clearInterval(N.value),window.removeEventListener("popstate",Y)}));var Y=function(){window.history.pushState(null,"",window.location.href)};return function(e,n){var t=(0,l.up)("ion-spinner");return(0,l.wg)(),(0,l.j4)((0,i.SU)(c._i),null,{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.Gu),{mode:"ios"},{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.sr),null,{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.wd),null,{default:(0,l.w5)((function(){return[(0,l.Uk)("Halaman Ujian Umum")]})),_:1}),(0,l.Wm)((0,i.SU)(c.oU),{slot:"start","default-href":"/",disabled:""})]})),_:1})]})),_:1}),(0,l.Wm)((0,i.SU)(c.W2),{fullscreen:!0,class:"exam-page"},{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.W2),{class:"ion-padding"},{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.PM),{style:{"background-color":"#faf8f2"}},{default:(0,l.w5)((function(){return[y.value.length>0&&!e.loading?((0,l.wg)(),(0,l.iD)("div",m,[(0,l.Wm)((0,i.SU)(c.YG),{style:{color:"white"},expand:"block",onClick:z},{default:(0,l.w5)((function(){return[(0,l.Uk)(" Pilih Soal ")]})),_:1})])):(0,l.kq)("",!0),e.loading?((0,l.wg)(),(0,l.j4)(t,{key:1,name:"crescent"})):(0,l.kq)("",!0)]})),_:1}),!P.value&&j.value<y.value.length?((0,l.wg)(),(0,l.iD)("div",w,[(0,l.Wm)((0,i.SU)(c.PM),null,{default:(0,l.w5)((function(){return[(0,l._)("div",p,[(0,l.Wm)((0,i.SU)(c.yp),{style:{color:"white"}},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,o.zw)(A(J.value)),1)]})),_:1})]),(0,l.Wm)((0,i.SU)(c.Zi),null,{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.Dq),null,{default:(0,l.w5)((function(){return[(0,l._)("div",{innerHTML:y.value[j.value].question},null,8,U)]})),_:1})]})),_:1}),(0,l.Wm)((0,i.SU)(c.FN),null,{default:(0,l.w5)((function(){return[y.value[j.value].imageUrl?((0,l.wg)(),(0,l.iD)("div",g,[(0,l.Wm)((0,i.SU)(c.Xz),{src:y.value[j.value].imageUrl},null,8,["src"])])):(0,l.kq)("",!0),y.value[j.value].videoUrl?((0,l.wg)(),(0,l.iD)("div",k,[(0,l._)("video",{src:y.value[j.value].videoUrl,controls:""},null,8,S)])):(0,l.kq)("",!0)]})),_:1})]})),_:1}),(0,l._)("div",h,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(y.value[j.value].options,(function(e,n){return(0,l.wg)(),(0,l.j4)((0,i.SU)(c.PM),{key:n,onClick:function(e){return Z(n)},class:(0,o.C_)({selected:I.value[j.value]===n})},{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.FN),null,{default:(0,l.w5)((function(){return[(0,l.Uk)((0,o.zw)(e),1)]})),_:2},1024)]})),_:2},1032,["onClick","class"])})),128))]),(0,l.Wm)((0,i.SU)(c.YG),{style:{color:"white"},expand:"block",onClick:O},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,o.zw)(j.value===y.value.length-1?"Finish":"Next"),1)]})),_:1})])):(0,l.kq)("",!0),P.value||j.value>=y.value.length?((0,l.wg)(),(0,l.iD)("div",_,[(0,l.Wm)((0,i.SU)(c.Ie),null,{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.Q$),null,{default:(0,l.w5)((function(){return[(0,l.Uk)("Nilai Anda: "+(0,o.zw)(H.value),1)]})),_:1})]})),_:1})])):(0,l.kq)("",!0)]})),_:1}),(0,l.Wm)((0,i.SU)(c.Px),{"is-open":D.value.isOpen,message:D.value.message,duration:D.value.duration,color:D.value.color,onDidDismiss:n[0]||(n[0]=function(){return D.value.isOpen=!1})},null,8,["is-open","message","duration","color"]),(0,l.Wm)((0,i.SU)(c.ki),{"is-open":C.value,onDidDismiss:G},{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.Gu),null,{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.sr),null,{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.wd),null,{default:(0,l.w5)((function(){return[(0,l.Uk)("Pilih Soal")]})),_:1}),(0,l.Wm)((0,i.SU)(c.Sm),{slot:"end"},{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.YG),{onClick:G},{default:(0,l.w5)((function(){return[(0,l.Uk)("Tutup")]})),_:1})]})),_:1})]})),_:1})]})),_:1}),(0,l.Wm)((0,i.SU)(c.W2),null,{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.q_),null,{default:(0,l.w5)((function(){return[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(y.value,(function(e,n){return(0,l.wg)(),(0,l.j4)((0,i.SU)(c.Ie),{key:n,onClick:function(e){return E(n)}},{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.Q$),null,{default:(0,l.w5)((function(){return[(0,l.Uk)("Soal "+(0,o.zw)(n+1),1)]})),_:2},1024)]})),_:2},1032,["onClick"])})),128))]})),_:1})]})),_:1})]})),_:1},8,["is-open"])]})),_:1})]})),_:1})}}},W=x,b=W}}]);
//# sourceMappingURL=239.72d17da1.js.map