"use strict";(self["webpackChunkresep_bunda"]=self["webpackChunkresep_bunda"]||[]).push([[3620],{1285:(e,n,t)=>{var a=t(7908),r=t(1400),u=t(6244);e.exports=function(e){var n=a(this),t=u(n),l=arguments.length,i=r(l>1?arguments[1]:void 0,t),o=l>2?arguments[2]:void 0,c=void 0===o?t:r(o,t);while(c>i)n[i++]=e;return n}},3671:(e,n,t)=>{var a=t(9662),r=t(7908),u=t(8361),l=t(6244),i=TypeError,o=function(e){return function(n,t,o,c){a(t);var s=r(n),d=u(s),f=l(s),v=e?f-1:0,w=e?-1:1;if(o<2)while(1){if(v in d){c=d[v],v+=w;break}if(v+=w,e?v<0:f<=v)throw i("Reduce of empty array with no initial value")}for(;e?v>=0:f>v;v+=w)v in d&&(c=t(c,d[v],v,s));return c}};e.exports={left:o(!1),right:o(!0)}},3009:(e,n,t)=>{var a=t(7854),r=t(7293),u=t(1702),l=t(1340),i=t(3111).trim,o=t(1361),c=a.parseInt,s=a.Symbol,d=s&&s.iterator,f=/^[+-]?0x/i,v=u(f.exec),w=8!==c(o+"08")||22!==c(o+"0x16")||d&&!r((function(){c(Object(d))}));e.exports=w?function(e,n){var t=i(l(e));return c(t,n>>>0||(v(f,t)?16:10))}:c},3290:(e,n,t)=>{var a=t(2109),r=t(1285),u=t(1223);a({target:"Array",proto:!0},{fill:r}),u("fill")},5827:(e,n,t)=>{var a=t(2109),r=t(3671).left,u=t(2133),l=t(7392),i=t(5268),o=!i&&l>79&&l<83,c=o||!u("reduce");a({target:"Array",proto:!0,forced:c},{reduce:function(e){var n=arguments.length;return r(this,e,n,n>1?arguments[1]:void 0)}})},1058:(e,n,t)=>{var a=t(2109),r=t(3009);a({global:!0,forced:parseInt!==r},{parseInt:r})},3620:(e,n,t)=>{t.r(n),t.d(n,{default:()=>j});var a=t(124),r=t(3144),u=t(8534),l=(t(7327),t(1539),t(1249),t(6699),t(2023),t(7941),t(3290),t(1058),t(2564),t(8862),t(2222),t(3112),t(6647),t(3710),t(9714),t(5827),t(8309),t(7658),t(6252)),i=t(2262),o=t(3577),c=t(3167),s=t(6100),d=t(2201),f=t(316),v=t(5856),w={key:0},m={key:0,class:"question-frame"},p={class:"timer-badge"},U=(0,l._)("br",null,null,-1),S=(0,l._)("br",null,null,-1),g=["innerHTML"],k={key:0,class:"media-content"},_={key:1,class:"media-content"},h=["src"],x={class:"options"},W={key:1},b={key:1};const y={__name:"HalamanUjian",setup:function(e){var n=(0,s.ad)(v.H),t=(0,f.v0)(v.H),y=(0,d.yj)(),I=(0,d.tv)(),j=(0,i.iH)(y.params.jadwalId),H=(0,i.iH)([]),D=(0,i.iH)(0),J=(0,i.iH)([]),N=(0,i.iH)(0),C=(0,i.iH)({isOpen:!1,message:"",duration:2e3,color:"success"}),P=(0,i.iH)(0),T=(0,i.iH)(null),A=(0,i.iH)(!1),Q=(0,i.iH)(!1),O=function(){var e=(0,u.Z)((0,a.Z)().mark((function e(){var u,l,i,o,c,d,f;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(u=t.currentUser,!u){e.next=37;break}if(j.value){e.next=5;break}return console.error("jadwalId is undefined"),e.abrupt("return");case 5:return e.prev=5,e.next=8,(0,s.QT)((0,s.JU)(n,"examResults/".concat(u.uid,"/results"),j.value));case 8:if(l=e.sent,!l.exists()){e.next=13;break}return A.value=!0,N.value=l.data().score,e.abrupt("return");case 13:return e.next=15,(0,s.QT)((0,s.JU)(n,"jadwal",j.value));case 15:if(i=e.sent,!i.exists()){e.next=29;break}return o=i.data(),e.next=20,(0,s.PL)((0,s.hJ)(n,"soal"));case 20:c=e.sent,H.value=c.docs.map((function(e){return(0,r.Z)({id:e.id},e.data())})).filter((function(e){return o.soal&&o.soal.includes(e.id)})),d=JSON.parse(localStorage.getItem("answers_".concat(j.value))),J.value=d||new Array(H.value.length).fill(""),f=localStorage.getItem("timer_".concat(j.value)),P.value=f?parseInt(f,10):60*o.durasi,Z(),e.next=30;break;case 29:console.error("jadwalDoc does not exist");case 30:e.next=35;break;case 32:e.prev=32,e.t0=e["catch"](5),console.error("Error fetching documents:",e.t0);case 35:e.next=38;break;case 37:console.error("User is not authenticated");case 38:case"end":return e.stop()}}),e,null,[[5,32]])})));return function(){return e.apply(this,arguments)}}(),Z=function(){T.value=setInterval((function(){P.value>0?(P.value--,localStorage.setItem("timer_".concat(j.value),P.value),localStorage.setItem("answers_".concat(j.value),JSON.stringify(J.value))):(clearInterval(T.value),E())}),1e3)},z=function(e){var n=Math.floor(e/60),t=e%60;return"".concat(n.toString().padStart(2,"0"),":").concat(t.toString().padStart(2,"0"))},q=function(){D.value<H.value.length-1?D.value++:(G(),D.value++,E())},G=function(){var e=H.value.reduce((function(e,n,t){return n.correctAnswer===J.value[t]?e+1:e}),0);N.value=Math.round(e/H.value.length*100)},M=function(e){J.value[D.value]=e,localStorage.setItem("answers_".concat(j.value),JSON.stringify(J.value))},E=function(){var e=(0,u.Z)((0,a.Z)().mark((function e(){var r,u,l,i,o,c,d,f,v;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.currentUser,!r){e.next=37;break}return G(),e.prev=3,e.next=6,(0,s.pl)((0,s.JU)(n,"examResults/".concat(r.uid,"/results"),j.value),{userId:r.uid,jadwalId:j.value,score:N.value,createdAt:(0,s.Bt)()});case 6:return e.next=8,(0,s.QT)((0,s.JU)(n,"users",r.uid));case 8:return u=e.sent,l=u.data(),e.next=12,(0,s.QT)((0,s.JU)(n,"jadwal",j.value));case 12:return i=e.sent,o=i.data(),e.next=16,(0,s.QT)((0,s.JU)(n,"mataPelajaran",o.mataPelajaran));case 16:return c=e.sent,d=c.data(),e.next=20,(0,s.QT)((0,s.JU)(n,"kelas",o.kelas));case 20:return f=e.sent,v=f.data(),e.next=24,(0,s.pl)((0,s.JU)(n,"nilaiUjian",j.value),{userName:l.fullName,kelasName:v.name,mataPelajaranName:d.name,score:N.value,createdAt:(0,s.Bt)()});case 24:R("Ujian berhasil disubmit!","success"),A.value=!0,localStorage.removeItem("timer_".concat(j.value)),localStorage.removeItem("answers_".concat(j.value)),I.push({name:"siswa"}),e.next=35;break;case 31:e.prev=31,e.t0=e["catch"](3),console.error("Error submitting exam:",e.t0),R("Gagal submit ujian.","danger");case 35:e.next=38;break;case 37:R("Pengguna tidak terautentikasi.","danger");case 38:case"end":return e.stop()}}),e,null,[[3,31]])})));return function(){return e.apply(this,arguments)}}(),L=function(){Q.value=!0},Y=function(){Q.value=!1},F=function(e){D.value=e,Y()},R=function(e,n){C.value={isOpen:!0,message:e,duration:2e3,color:n}};(0,l.bv)((function(){O(),window.history.pushState(null,"",window.location.href),window.addEventListener("popstate",$)})),(0,l.Ah)((function(){T.value&&clearInterval(T.value),window.removeEventListener("popstate",$)}));var $=function(){window.history.pushState(null,"",window.location.href)};return function(e,n){return(0,l.wg)(),(0,l.j4)((0,i.SU)(c._i),null,{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.Gu),{mode:"ios"},{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.sr),null,{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.wd),null,{default:(0,l.w5)((function(){return[(0,l.Uk)("Ujian")]})),_:1}),(0,l.Wm)((0,i.SU)(c.oU),{slot:"start","default-href":"/",disabled:""})]})),_:1})]})),_:1}),(0,l.Wm)((0,i.SU)(c.W2),{fullscreen:!0,class:"exam-page"},{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.W2),{class:"ion-padding"},{default:(0,l.w5)((function(){return[A.value?((0,l.wg)(),(0,l.iD)("div",b,[(0,l.Wm)((0,i.SU)(c.Ie),null,{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.Q$),null,{default:(0,l.w5)((function(){return[(0,l.Uk)("Nilai Anda: "+(0,o.zw)(N.value),1)]})),_:1})]})),_:1})])):((0,l.wg)(),(0,l.iD)("div",w,[D.value<H.value.length?((0,l.wg)(),(0,l.iD)("div",m,[(0,l.Wm)((0,i.SU)(c.YG),{style:{color:"white"},expand:"block",onClick:L},{default:(0,l.w5)((function(){return[(0,l.Uk)(" Pilih Soal ")]})),_:1}),(0,l.Wm)((0,i.SU)(c.PM),null,{default:(0,l.w5)((function(){return[(0,l._)("div",p,[(0,l.Wm)((0,i.SU)(c.yp),{style:{color:"white"}},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,o.zw)(z(P.value)),1)]})),_:1})]),U,S,(0,l.Wm)((0,i.SU)(c.Zi),null,{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.Dq),null,{default:(0,l.w5)((function(){return[(0,l._)("div",{innerHTML:H.value[D.value].question},null,8,g)]})),_:1})]})),_:1}),(0,l.Wm)((0,i.SU)(c.FN),null,{default:(0,l.w5)((function(){return[H.value[D.value].imageUrl?((0,l.wg)(),(0,l.iD)("div",k,[(0,l.Wm)((0,i.SU)(c.Xz),{src:H.value[D.value].imageUrl},null,8,["src"])])):(0,l.kq)("",!0),H.value[D.value].videoUrl?((0,l.wg)(),(0,l.iD)("div",_,[(0,l._)("video",{src:H.value[D.value].videoUrl,controls:""},null,8,h)])):(0,l.kq)("",!0)]})),_:1})]})),_:1}),(0,l._)("div",x,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(H.value[D.value].options,(function(e,n){return(0,l.wg)(),(0,l.j4)((0,i.SU)(c.PM),{key:n,onClick:function(e){return M(n)},class:(0,o.C_)({selected:J.value[D.value]===n})},{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.FN),null,{default:(0,l.w5)((function(){return[(0,l.Uk)((0,o.zw)(e),1)]})),_:2},1024)]})),_:2},1032,["onClick","class"])})),128))]),(0,l.Wm)((0,i.SU)(c.YG),{style:{color:"white"},expand:"block",onClick:q},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,o.zw)(D.value===H.value.length-1?"Finish":"Next"),1)]})),_:1})])):((0,l.wg)(),(0,l.iD)("div",W,[(0,l.Wm)((0,i.SU)(c.Ie),null,{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.Q$),null,{default:(0,l.w5)((function(){return[(0,l.Uk)("Nilai Anda: "+(0,o.zw)(N.value),1)]})),_:1})]})),_:1})]))]))]})),_:1}),(0,l.Wm)((0,i.SU)(c.Px),{"is-open":C.value.isOpen,message:C.value.message,duration:C.value.duration,color:C.value.color,onDidDismiss:n[0]||(n[0]=function(){return C.value.isOpen=!1})},null,8,["is-open","message","duration","color"]),(0,l.Wm)((0,i.SU)(c.ki),{"is-open":Q.value,onDidDismiss:Y},{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.Gu),null,{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.sr),null,{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.wd),null,{default:(0,l.w5)((function(){return[(0,l.Uk)("Pilih Soal")]})),_:1}),(0,l.Wm)((0,i.SU)(c.Sm),{slot:"end"},{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.YG),{onClick:Y},{default:(0,l.w5)((function(){return[(0,l.Uk)("Tutup")]})),_:1})]})),_:1})]})),_:1})]})),_:1}),(0,l.Wm)((0,i.SU)(c.W2),null,{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.q_),null,{default:(0,l.w5)((function(){return[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(H.value,(function(e,n){return(0,l.wg)(),(0,l.j4)((0,i.SU)(c.Ie),{key:n,onClick:function(e){return F(n)}},{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.Q$),null,{default:(0,l.w5)((function(){return[(0,l.Uk)("Soal "+(0,o.zw)(n+1),1)]})),_:2},1024)]})),_:2},1032,["onClick"])})),128))]})),_:1})]})),_:1})]})),_:1},8,["is-open"])]})),_:1})]})),_:1})}}},I=y,j=I}}]);
//# sourceMappingURL=3620.67fdf2c6.js.map