{"version":3,"file":"js/4623.23e8807f.js","mappings":"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","sources":["webpack://resep-bunda/./src/views/admin/TambahMatePelajaran.vue","webpack://resep-bunda/./src/views/admin/TambahMatePelajaran.vue?e59e"],"sourcesContent":["<template>\n  <ion-page>\n    <ion-header mode=\"ios\">\n      <ion-toolbar>\n        <ion-title>Tambah Mata Pelajaran</ion-title>\n        <ion-back-button slot=\"start\" default-href=\"/\" />\n      </ion-toolbar>\n    </ion-header>\n    <ion-content :fullscreen=\"true\">\n      <ion-refresher slot=\"fixed\" @ionRefresh=\"doRefresh($event)\">\n        <ion-refresher-content />\n      </ion-refresher>\n      <ion-content class=\"ion-padding\">\n        <ion-item>\n          <ion-label position=\"floating\">Nama Mata Pelajaran</ion-label>\n          <ion-input\n            v-model=\"subjectName\"\n            placeholder=\"Masukkan nama mata pelajaran\"\n          ></ion-input>\n        </ion-item>\n        <ion-button expand=\"block\" @click=\"addSubject\" style=\"color: white\"\n          >Tambah Mata Pelajaran</ion-button\n        >\n\n        <ion-grid class=\"ion-padding\">\n          <ion-row>\n            <ion-col>\n              <h2>Daftar Mata Pelajaran</h2>\n              <table>\n                <thead>\n                  <tr>\n                    <th>Nama Mata Pelajaran</th>\n                    <th>Aksi</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr v-for=\"subject in subjectList\" :key=\"subject.id\">\n                    <td>{{ subject.name }}</td>\n                    <td>\n                      <ion-button\n                        color=\"warning\"\n                        @click=\"openEditModal(subject)\"\n                        >Edit</ion-button\n                      >\n                      <ion-button\n                        color=\"danger\"\n                        @click=\"deleteSubject(subject.id)\"\n                        >Hapus</ion-button\n                      >\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </ion-col>\n          </ion-row>\n        </ion-grid>\n      </ion-content>\n\n      <ion-modal :is-open=\"isEditModalOpen\" @did-dismiss=\"closeEditModal\">\n        <ion-header>\n          <ion-toolbar>\n            <ion-title>Edit Mata Pelajaran</ion-title>\n            <ion-buttons slot=\"end\">\n              <ion-button @click=\"closeEditModal\">Close</ion-button>\n            </ion-buttons>\n          </ion-toolbar>\n        </ion-header>\n        <ion-content>\n          <ion-item>\n            <ion-label position=\"floating\">Nama Mata Pelajaran</ion-label>\n            <ion-input v-model=\"editSubjectName\"></ion-input>\n          </ion-item>\n          <ion-button expand=\"block\" @click=\"updateSubject\"\n            >Simpan Perubahan</ion-button\n          >\n        </ion-content>\n      </ion-modal>\n\n      <ion-toast\n        :is-open=\"toast.isOpen\"\n        :message=\"toast.message\"\n        :duration=\"toast.duration\"\n        :color=\"toast.color\"\n        @did-dismiss=\"() => (toast.isOpen = false)\"\n      ></ion-toast>\n    </ion-content>\n  </ion-page>\n</template>\n\n<script setup>\nimport {\n  IonPage,\n  IonHeader,\n  IonToolbar,\n  IonTitle,\n  IonBackButton,\n  IonContent,\n  IonRefresher,\n  IonRefresherContent,\n  IonButton,\n  IonGrid,\n  IonRow,\n  IonCol,\n  IonModal,\n  IonItem,\n  IonLabel,\n  IonInput,\n  IonToast,\n} from \"@ionic/vue\";\nimport { ref, onMounted } from \"vue\";\nimport {\n  getFirestore,\n  collection,\n  addDoc,\n  getDocs,\n  updateDoc,\n  deleteDoc,\n  doc,\n  serverTimestamp,\n} from \"firebase/firestore\";\nimport { firebaseApp } from \"../firebase.js\";\n\nconst db = getFirestore(firebaseApp);\nconst subjectName = ref(\"\");\nconst subjectList = ref([]);\nconst toast = ref({\n  isOpen: false,\n  message: \"\",\n  duration: 2000,\n  color: \"success\",\n});\nconst isEditModalOpen = ref(false);\nconst editSubjectName = ref(\"\");\nconst editSubjectId = ref(\"\");\n\nconst fetchSubjects = async () => {\n  try {\n    const querySnapshot = await getDocs(collection(db, \"mataPelajaran\"));\n    subjectList.value = querySnapshot.docs.map((doc) => ({\n      id: doc.id,\n      ...doc.data(),\n    }));\n  } catch (error) {\n    console.error(\"Error fetching subjects:\", error);\n    showToast(\n      \"Terjadi kesalahan saat mengambil data mata pelajaran.\",\n      \"danger\"\n    );\n  }\n};\n\nconst addSubject = async () => {\n  if (!subjectName.value) {\n    showToast(\"Nama mata pelajaran tidak boleh kosong\", \"danger\");\n    return;\n  }\n  try {\n    await addDoc(collection(db, \"mataPelajaran\"), {\n      name: subjectName.value,\n      createdAt: serverTimestamp(),\n    });\n    showToast(\"Mata pelajaran berhasil ditambahkan\", \"success\");\n    subjectName.value = \"\"; // Clear the input\n    fetchSubjects(); // Refresh the list\n  } catch (error) {\n    console.error(\"Error adding subject:\", error);\n    showToast(\"Terjadi kesalahan saat menambahkan mata pelajaran\", \"danger\");\n  }\n};\n\nconst openEditModal = (subject) => {\n  editSubjectName.value = subject.name;\n  editSubjectId.value = subject.id;\n  isEditModalOpen.value = true;\n};\n\nconst closeEditModal = () => {\n  isEditModalOpen.value = false;\n  editSubjectName.value = \"\";\n  editSubjectId.value = \"\";\n};\n\nconst updateSubject = async () => {\n  if (!editSubjectName.value) {\n    showToast(\"Nama mata pelajaran tidak boleh kosong\", \"danger\");\n    return;\n  }\n  try {\n    await updateDoc(doc(db, \"mataPelajaran\", editSubjectId.value), {\n      name: editSubjectName.value,\n    });\n    showToast(\"Mata pelajaran berhasil diperbarui\", \"success\");\n    closeEditModal();\n    fetchSubjects(); // Refresh the list\n  } catch (error) {\n    console.error(\"Error updating subject:\", error);\n    showToast(\"Terjadi kesalahan saat memperbarui mata pelajaran\", \"danger\");\n  }\n};\n\nconst deleteSubject = async (subjectId) => {\n  try {\n    await deleteDoc(doc(db, \"mataPelajaran\", subjectId));\n    showToast(\"Mata pelajaran berhasil dihapus\", \"success\");\n    fetchSubjects(); // Refresh the list\n  } catch (error) {\n    console.error(\"Error deleting subject:\", error);\n    showToast(\"Terjadi kesalahan saat menghapus mata pelajaran\", \"danger\");\n  }\n};\n\nconst showToast = (message, color) => {\n  toast.value = {\n    isOpen: true,\n    message,\n    duration: 2000,\n    color,\n  };\n};\n\nconst doRefresh = (event) => {\n  setTimeout(() => {\n    fetchSubjects();\n    event.target.complete();\n  }, 2000);\n};\n\nonMounted(() => {\n  fetchSubjects();\n});\n</script>\n\n<style scoped>\ntable {\n  width: 100%;\n  border-collapse: collapse;\n  margin-top: 20px;\n}\n\nth,\ntd {\n  border: 1px solid #ddd;\n  padding: 8px;\n  text-align: left;\n}\n\nth {\n  background-color: #f2f2f2;\n  font-weight: bold;\n}\n\ntbody tr:nth-child(even) {\n  background-color: #f9f9f9;\n}\n\ntbody tr:hover {\n  background-color: #f1f1f1;\n}\n</style>\n","import script from \"./TambahMatePelajaran.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./TambahMatePelajaran.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./TambahMatePelajaran.vue?vue&type=style&index=0&id=aa3a9dc4&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-aa3a9dc4\"]])\n\nexport default __exports__"],"names":["db","getFirestore","firebaseApp","subjectName","ref","subjectList","toast","isOpen","message","duration","color","isEditModalOpen","editSubjectName","editSubjectId","fetchSubjects","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","querySnapshot","wrap","_context","prev","next","getDocs","collection","sent","value","docs","map","doc","_objectSpread","id","data","t0","console","error","showToast","stop","apply","arguments","addSubject","_ref2","_callee2","_context2","abrupt","addDoc","name","createdAt","serverTimestamp","openEditModal","subject","closeEditModal","updateSubject","_ref3","_callee3","_context3","updateDoc","deleteSubject","_ref4","_callee4","subjectId","_context4","deleteDoc","_x","doRefresh","event","setTimeout","target","complete","onMounted","__exports__"],"sourceRoot":""}