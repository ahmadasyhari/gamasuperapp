{"version":3,"file":"js/6679.50a8ca59.js","mappings":"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","sources":["webpack://resep-bunda/./src/views/user/LihatHasilUjian.vue","webpack://resep-bunda/./src/views/user/LihatHasilUjian.vue?ab13"],"sourcesContent":["<template>\n  <ion-page>\n    <ion-header mode=\"ios\">\n      <ion-toolbar>\n        <ion-title>Hasil Ujian</ion-title>\n        <ion-back-button slot=\"start\" default-href=\"/\" />\n      </ion-toolbar>\n    </ion-header>\n    <ion-content :fullscreen=\"true\">\n      <ion-refresher slot=\"fixed\" @ionRefresh=\"doRefresh($event)\">\n        <ion-refresher-content />\n      </ion-refresher>\n      <ion-content class=\"ion-padding\">\n        <ion-grid>\n          <ion-row>\n            <ion-col>\n              <h2>Daftar Hasil Ujian</h2>\n              <ion-list>\n                <ion-item>\n                  <ion-label>\n                    <table>\n                      <thead>\n                        <tr>\n                          <th>Mata Pelajaran</th>\n                          <th>Nilai</th>\n                          <th>Tanggal</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        <tr v-for=\"result in examResults\" :key=\"result.id\">\n                          <td>{{ result.mataPelajaranName }}</td>\n                          <td>\n                            <ion-badge\n                              :color=\"result.score < 65 ? 'danger' : 'success'\"\n                            >\n                              {{ result.score }}\n                            </ion-badge>\n                          </td>\n                          <td>{{ formatDate(result.createdAt) }}</td>\n                        </tr>\n                      </tbody>\n                    </table>\n                  </ion-label>\n                </ion-item>\n              </ion-list>\n            </ion-col>\n          </ion-row>\n        </ion-grid>\n      </ion-content>\n      <ion-toast\n        :is-open=\"toast.isOpen\"\n        :message=\"toast.message\"\n        :duration=\"toast.duration\"\n        :color=\"toast.color\"\n        @did-dismiss=\"() => (toast.isOpen = false)\"\n      ></ion-toast>\n    </ion-content>\n  </ion-page>\n</template>\n\n<script setup>\nimport {\n  IonPage,\n  IonHeader,\n  IonToolbar,\n  IonTitle,\n  IonBackButton,\n  IonContent,\n  IonRefresher,\n  IonRefresherContent,\n  IonGrid,\n  IonList,\n  IonItem,\n  IonLabel,\n  IonToast,\n  IonBadge,\n} from \"@ionic/vue\";\nimport { ref, onMounted } from \"vue\";\nimport {\n  getFirestore,\n  collection,\n  query,\n  getDocs,\n  doc,\n  getDoc,\n} from \"firebase/firestore\";\nimport { getAuth } from \"firebase/auth\";\nimport { firebaseApp } from \"../firebase.js\";\n\nconst db = getFirestore(firebaseApp);\nconst auth = getAuth(firebaseApp);\nconst examResults = ref([]);\nconst toast = ref({\n  isOpen: false,\n  message: \"\",\n  duration: 2000,\n  color: \"success\",\n});\n\nconst fetchExamResults = async () => {\n  const user = auth.currentUser;\n  if (user) {\n    try {\n      const q = query(collection(db, `examResults/${user.uid}/results`));\n      const querySnapshot = await getDocs(q);\n\n      const results = await Promise.all(\n        querySnapshot.docs.map(async (docSnapshot) => {\n          const data = docSnapshot.data();\n          console.log(\"Exam data:\", data); // Debugging log\n          const jadwalDoc = await getDoc(doc(db, \"jadwal\", data.jadwalId));\n          if (jadwalDoc.exists()) {\n            const jadwalData = jadwalDoc.data();\n            console.log(\"Jadwal data:\", jadwalData); // Debugging log\n            const mataPelajaranDoc = await getDoc(\n              doc(db, \"mataPelajaran\", jadwalData.mataPelajaran)\n            );\n            if (mataPelajaranDoc.exists()) {\n              data.mataPelajaranName = mataPelajaranDoc.data().name;\n              console.log(\"Mata Pelajaran data:\", mataPelajaranDoc.data()); // Debugging log\n            }\n          }\n          return { id: docSnapshot.id, ...data };\n        })\n      );\n\n      examResults.value = results;\n      console.log(\"Hasil ujian:\", examResults.value); // Debugging log\n    } catch (error) {\n      console.error(\"Error fetching exam results:\", error);\n      showToast(\"Terjadi kesalahan saat mengambil data hasil ujian.\", \"danger\");\n    }\n  } else {\n    showToast(\"Pengguna tidak terautentikasi.\", \"danger\");\n  }\n};\n\nconst formatDate = (timestamp) => {\n  if (!timestamp) return \"N/A\";\n  const date = new Date(timestamp.seconds * 1000);\n  return date.toLocaleDateString(\"id-ID\", {\n    year: \"numeric\",\n    month: \"short\",\n    day: \"numeric\",\n  });\n};\n\nconst showToast = (message, color) => {\n  toast.value = {\n    isOpen: true,\n    message,\n    duration: 2000,\n    color,\n  };\n};\n\nconst doRefresh = (event) => {\n  setTimeout(() => {\n    fetchExamResults();\n    event.target.complete();\n  }, 2000);\n};\n\nonMounted(() => {\n  fetchExamResults();\n});\n</script>\n\n<style scoped>\ntable {\n  width: 100%;\n  border-collapse: collapse;\n  margin-top: 20px;\n}\n\nth,\ntd {\n  border: 1px solid #ddd;\n  padding: 8px;\n  text-align: left;\n}\n\nth {\n  background-color: #f2f2f2;\n  font-weight: bold;\n}\n\ntbody tr:nth-child(even) {\n  background-color: #f9f9f9;\n}\n\ntbody tr:hover {\n  background-color: #f1f1f1;\n}\n</style>\n","import script from \"./LihatHasilUjian.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./LihatHasilUjian.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./LihatHasilUjian.vue?vue&type=style&index=0&id=78a32f48&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-78a32f48\"]])\n\nexport default __exports__"],"names":["db","getFirestore","firebaseApp","auth","getAuth","examResults","ref","toast","isOpen","message","duration","color","fetchExamResults","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","user","q","querySnapshot","results","wrap","_context2","prev","next","currentUser","query","collection","concat","uid","getDocs","sent","Promise","all","docs","map","_ref2","_callee","docSnapshot","data","jadwalDoc","jadwalData","mataPelajaranDoc","_context","console","log","getDoc","doc","jadwalId","exists","mataPelajaran","mataPelajaranName","name","abrupt","_objectSpread","id","stop","_x","apply","arguments","value","t0","error","showToast","formatDate","timestamp","date","Date","seconds","toLocaleDateString","year","month","day","doRefresh","event","setTimeout","target","complete","onMounted","__exports__"],"sourceRoot":""}