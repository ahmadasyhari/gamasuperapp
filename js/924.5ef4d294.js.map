{"version":3,"file":"js/924.5ef4d294.js","mappings":"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","sources":["webpack://resep-bunda/./node_modules/core-js/internals/array-fill.js","webpack://resep-bunda/./node_modules/core-js/internals/array-reduce.js","webpack://resep-bunda/./node_modules/core-js/modules/es.array.fill.js","webpack://resep-bunda/./node_modules/core-js/modules/es.array.reduce.js","webpack://resep-bunda/./src/views/umum/HalamanUjianUmum.vue","webpack://resep-bunda/./src/views/umum/HalamanUjianUmum.vue?8db6"],"sourcesContent":["'use strict';\nvar toObject = require('../internals/to-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// `Array.prototype.fill` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.fill\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = lengthOfArrayLike(O);\n  var argumentsLength = arguments.length;\n  var index = toAbsoluteIndex(argumentsLength > 1 ? arguments[1] : undefined, length);\n  var end = argumentsLength > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","'use strict';\nvar aCallable = require('../internals/a-callable');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\nvar $TypeError = TypeError;\n\n// `Array.prototype.{ reduce, reduceRight }` methods implementation\nvar createMethod = function (IS_RIGHT) {\n  return function (that, callbackfn, argumentsLength, memo) {\n    aCallable(callbackfn);\n    var O = toObject(that);\n    var self = IndexedObject(O);\n    var length = lengthOfArrayLike(O);\n    var index = IS_RIGHT ? length - 1 : 0;\n    var i = IS_RIGHT ? -1 : 1;\n    if (argumentsLength < 2) while (true) {\n      if (index in self) {\n        memo = self[index];\n        index += i;\n        break;\n      }\n      index += i;\n      if (IS_RIGHT ? index < 0 : length <= index) {\n        throw $TypeError('Reduce of empty array with no initial value');\n      }\n    }\n    for (;IS_RIGHT ? index >= 0 : length > index; index += i) if (index in self) {\n      memo = callbackfn(memo, self[index], index, O);\n    }\n    return memo;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.reduce` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduce\n  left: createMethod(false),\n  // `Array.prototype.reduceRight` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduceright\n  right: createMethod(true)\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar fill = require('../internals/array-fill');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.fill` method\n// https://tc39.es/ecma262/#sec-array.prototype.fill\n$({ target: 'Array', proto: true }, {\n  fill: fill\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('fill');\n","'use strict';\nvar $ = require('../internals/export');\nvar $reduce = require('../internals/array-reduce').left;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar CHROME_VERSION = require('../internals/engine-v8-version');\nvar IS_NODE = require('../internals/engine-is-node');\n\n// Chrome 80-82 has a critical bug\n// https://bugs.chromium.org/p/chromium/issues/detail?id=1049982\nvar CHROME_BUG = !IS_NODE && CHROME_VERSION > 79 && CHROME_VERSION < 83;\nvar FORCED = CHROME_BUG || !arrayMethodIsStrict('reduce');\n\n// `Array.prototype.reduce` method\n// https://tc39.es/ecma262/#sec-array.prototype.reduce\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    var length = arguments.length;\n    return $reduce(this, callbackfn, length, length > 1 ? arguments[1] : undefined);\n  }\n});\n","<template>\n  <ion-page>\n    <ion-header mode=\"ios\">\n      <ion-toolbar>\n        <ion-title>Halaman Ujian Umum</ion-title>\n        <ion-back-button slot=\"start\" default-href=\"/\" disabled />\n      </ion-toolbar>\n    </ion-header>\n\n    <ion-content :fullscreen=\"true\" class=\"exam-page\">\n      <ion-content class=\"ion-padding\">\n        <!-- Tabel Daftar Soal -->\n        <ion-card style=\"background-color: #faf8f2\">\n          <div class=\"image-grid\" v-if=\"questions.length > 0 && !loading\">\n            <ion-card v-if=\"hasTakenExam\" class=\"ion-text-center\">\n          <ion-card-header>\n            <ion-card-title>Hasil Ujian</ion-card-title>\n          </ion-card-header>\n\n          <ion-card-content>\n            <p>Nilai Anda: <strong>{{ score }}</strong></p>\n            <ion-button\n              expand=\"block\"\n              color=\"success\"\n              @click=\"goHome\"\n              style=\"margin-top: 10px;\"\n            >\n              Kembali ke Halaman Utama\n            </ion-button>\n            <ion-button\n              expand=\"block\"\n              color=\"warning\"\n              @click=\"resetExam\"\n              style=\"margin-top: 10px;\"\n            >\n              Ujian Ulang\n            </ion-button>\n          </ion-card-content>\n        </ion-card>\n            \n          </div>\n          <ion-spinner v-if=\"loading\" name=\"crescent\"></ion-spinner>\n        </ion-card>\n        <!-- Timer dan Soal -->\n        <div v-if=\"!hasTakenExam && currentQuestionIndex < questions.length\">\n          <ion-button\n              style=\"color: white\"\n              expand=\"block\"\n              @click=\"openQuestionModal\"\n            >\n              Pilih Soal\n            </ion-button>\n          <ion-card>\n            <div class=\"timer-badge\">\n              <ion-badge style=\"color: white\">{{\n                formatTime(timer)\n              }}</ion-badge>\n            </div>\n            <ion-card-header>\n              <ion-card-title>\n                <div v-html=\"questions[currentQuestionIndex].question\"></div>\n              </ion-card-title>\n            </ion-card-header>\n            <ion-card-content>\n              <div v-if=\"questions[currentQuestionIndex].imageUrl\">\n                <ion-img\n                  :src=\"questions[currentQuestionIndex].imageUrl\"\n                ></ion-img>\n              </div>\n              <div v-if=\"questions[currentQuestionIndex].videoUrl\">\n                <video\n                  :src=\"questions[currentQuestionIndex].videoUrl\"\n                  controls\n                ></video>\n              </div>\n            </ion-card-content>\n          </ion-card>\n\n          <!-- Pilihan Jawaban -->\n          <div class=\"options\">\n            <ion-card\n              v-for=\"(option, key) in questions[currentQuestionIndex].options\"\n              :key=\"key\"\n              @click=\"selectOption(key)\"\n              :class=\"{ selected: answers[currentQuestionIndex] === key }\"\n            >\n              <ion-card-content>{{ option }}</ion-card-content>\n            </ion-card>\n          </div>\n\n          <ion-button style=\"color: white\" expand=\"block\" @click=\"nextQuestion\">\n            {{\n              currentQuestionIndex === questions.length - 1 ? \"Finish\" : \"Next\"\n            }}\n          </ion-button>\n        </div>\n\n      </ion-content>\n\n      <!-- Pop-up alert untuk hasil ujian -->\n      <ion-alert\n        :is-open=\"isAlertOpen\"\n        header=\"Hasil Ujian\"\n        :message=\"'Nilai Anda: ' + score\"\n        :buttons=\"[{\n          text: 'OK',\n          handler: storeScoreAndGoHome\n        }, \n        { \n          text: 'Ujian Ulang', \n          handler: resetExam \n        }]\"\n        @did-dismiss=\"() => (isAlertOpen = false)\"  \n      >\n      </ion-alert>\n\n      <ion-toast\n        :is-open=\"toast.isOpen\"\n        :message=\"toast.message\"\n        :duration=\"toast.duration\"\n        :color=\"toast.color\"\n        @did-dismiss=\"() => (toast.isOpen = false)\"\n      ></ion-toast>\n\n      <ion-modal :is-open=\"isModalOpen\" @did-dismiss=\"closeModal\">\n        <ion-header>\n          <ion-toolbar>\n            <ion-title>Pilih Soal</ion-title>\n            <ion-buttons slot=\"end\">\n              <ion-button @click=\"closeModal\">Tutup</ion-button>\n            </ion-buttons>\n          </ion-toolbar>\n        </ion-header>\n        <ion-content>\n          <ion-list>\n            <ion-item\n              v-for=\"(question, index) in questions\"\n              :key=\"index\"\n              @click=\"jumpToQuestion(index)\"\n            >\n              <ion-label>Soal {{ index + 1 }}</ion-label>\n            </ion-item>\n          </ion-list>\n        </ion-content>\n      </ion-modal>\n    </ion-content>\n  </ion-page>\n</template>\n\n<script setup>\nimport {\n  IonPage,\n  IonHeader,\n  IonToolbar,\n  IonTitle,\n  IonContent,\n  IonItem,\n  IonLabel,\n  IonButton,\n  IonToast,\n  IonBackButton,\n  IonBadge,\n  IonCard,\n  IonCardHeader,\n  IonCardTitle,\n  IonCardContent,\n  IonImg,\n  IonModal,\n  IonList,\n  IonButtons,\n  IonAlert,\n} from \"@ionic/vue\";\nimport { ref, onMounted, watchEffect } from \"vue\";\nimport {\n  getFirestore,\n  doc,\n  getDoc,\n  collection,\n  getDocs,\n  setDoc,\n  serverTimestamp,\n} from \"firebase/firestore\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport { getAuth } from \"firebase/auth\";\nimport { firebaseApp } from \"../firebase.js\";\n\nconst db = getFirestore(firebaseApp);\nconst auth = getAuth(firebaseApp);\nconst route = useRoute();\nconst router = useRouter();\nconst jadwalId = ref(route.params.jadwalId);\nconst questions = ref([]);\nconst currentQuestionIndex = ref(0);\nconst answers = ref([]);\nconst score = ref(0);\nconst toast = ref({\n  isOpen: false,\n  message: \"\",\n  duration: 2000,\n  color: \"success\",\n});\nconst timer = ref(0);\nconst intervalId = ref(null);\nconst hasTakenExam = ref(false);\nconst isModalOpen = ref(false);\nconst isAlertOpen = ref(false); // Pop-up alert untuk hasil ujian\nlet initialDuration = 0;  // Untuk menyimpan durasi awal dari jadwal\n\n// Fungsi formatTime untuk format waktu MM:SS\nconst formatTime = (seconds) => {\n  const minutes = Math.floor(seconds / 60);\n  const secs = seconds % 60;\n  return `${minutes.toString().padStart(2, \"0\")}:${secs.toString().padStart(2, \"0\")}`;\n};\n\n// Fungsi untuk cek status ujian\nconst checkExamStatus = () => {\n  const savedScore = localStorage.getItem(`score_${jadwalId.value}`);\n  if (savedScore) {\n    score.value = savedScore;\n    hasTakenExam.value = true;\n    isAlertOpen.value = true; // Tampilkan pop-up hasil ujian\n  }\n};\n\nconst fetchQuestions = async () => {\n  const user = auth.currentUser;\n  if (user) {\n    if (!jadwalId.value) {\n      console.error(\"jadwalId is undefined\");\n      return;\n    }\n\n    try {\n      const jadwalDoc = await getDoc(doc(db, \"jadwalcpns\", jadwalId.value));\n      if (jadwalDoc.exists()) {\n        const jadwalData = jadwalDoc.data();\n        const questionsSnapshot = await getDocs(collection(db, \"soalcpns\"));\n        questions.value = questionsSnapshot.docs\n          .map((doc) => ({\n            id: doc.id,\n            ...doc.data(),\n          }))\n          .filter(\n            (question) =>\n              jadwalData.soal && jadwalData.soal.includes(question.id)\n          );\n        initialDuration = jadwalData.durasi * 60;  // Simpan durasi awal\n        timer.value = initialDuration;  // Atur timer ke durasi awal\n\n        const savedAnswers = JSON.parse(localStorage.getItem(`answers_${jadwalId.value}`));\n        if (savedAnswers) {\n          answers.value = savedAnswers;\n        } else {\n          answers.value = new Array(questions.value.length).fill(\"\");\n        }\n        startTimer();\n      } else {\n        console.error(\"jadwalDoc does not exist\");\n      }\n    } catch (error) {\n      console.error(\"Error fetching documents:\", error);\n    }\n  } else {\n    console.error(\"User is not authenticated\");\n  }\n};\n\nconst startTimer = () => {\n  intervalId.value = setInterval(() => {\n    if (timer.value > 0) {\n      timer.value--;\n    } else {\n      clearInterval(intervalId.value);\n      finishExam(); // Pop-up hasil ujian jika waktu habis\n    }\n  }, 1000);\n};\n\nconst resetExam = () => {\n  currentQuestionIndex.value = 0;\n  answers.value = new Array(questions.value.length).fill(\"\");\n  timer.value = initialDuration;\n  hasTakenExam.value = false;  // Tutup pop-up reset\n  clearInterval(intervalId.value);\n  startTimer();\n  localStorage.removeItem(`score_${jadwalId.value}`);\n};\n\nconst nextQuestion = () => {\n  if (currentQuestionIndex.value < questions.value.length - 1) {\n    currentQuestionIndex.value++;\n  } else {\n    finishExam();\n  }\n};\n\nconst finishExam = () => {\n  calculateScore();\n  isAlertOpen.value = true; // Tampilkan alert hasil ujian\n  localStorage.setItem(`score_${jadwalId.value}`, score.value);  // Simpan nilai di localStorage\n  hasTakenExam.value = true;\n};\n\nconst calculateScore = () => {\n  const correctAnswers = questions.value.reduce((acc, question, index) => {\n    if (question.correctAnswer === answers.value[index]) {\n      return acc + 1;\n    }\n    return acc;\n  }, 0);\n  score.value = Math.round((correctAnswers / questions.value.length) * 100);\n};\n\nconst storeScoreAndGoHome = async () => {\n  const user = auth.currentUser;\n  if (user) {\n    try {\n      await setDoc(doc(db, `examResults/${user.uid}/results`, jadwalId.value), {\n        userId: user.uid,\n        jadwalId: jadwalId.value,\n        score: score.value,\n        createdAt: serverTimestamp(),\n      });\n      showToast(\"Nilai berhasil disimpan!\", \"success\");\n      router.push('/');  // Kembali ke halaman beranda\n    } catch (error) {\n      console.error(\"Error saving score:\", error);\n      showToast(\"Gagal menyimpan nilai.\", \"danger\");\n    }\n  }\n};\n\nconst selectOption = (option) => {\n  answers.value[currentQuestionIndex.value] = option;\n};\n\nconst showToast = (message, color) => {\n  toast.value = { isOpen: true, message, duration: 2000, color };\n};\n\n// Saat halaman dimuat, cek apakah sudah ujian\nonMounted(() => {\n  checkExamStatus();  // Cek status ujian dari localStorage saat halaman dimuat\n  fetchQuestions();    // Lanjutkan untuk memuat soal\n});\n\n// Watch untuk memonitor perubahan di localStorage secara reaktif\nwatchEffect(() => {\n  checkExamStatus();\n});\n\nconst goHome = () => {\n  router.push('/');  // Mengarahkan ke halaman home\n};\n</script>\n\n\n\n\n<style>\n.exam-page {\n  position: relative;\n}\n\n.timer-badge {\n  position: fixed;\n  top: 10px;\n  left: 50%;\n  transform: translateX(-50%);\n  z-index: 10;\n}\n\n.question-frame {\n  margin-bottom: 20px;\n}\n\n.table {\n  width: 100%;\n  border-collapse: collapse;\n  margin-top: 20px;\n}\n\n.table th,\n.table td {\n  border: 1px solid #ddd;\n  padding: 8px;\n  text-align: left;\n}\n\n.table th {\n  background-color: #f2f2f2;\n}\n\n.table tbody tr:hover {\n  background-color: #f1f1f1;\n}\n\n.options {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n}\n\n.options ion-card {\n  flex: 1 1 calc(50% - 10px);\n  cursor: pointer;\n  text-align: center;\n}\n\n.options ion-card.selected {\n  border: 2px solid var(--ion-color-primary);\n}\n</style>\n","import script from \"./HalamanUjianUmum.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./HalamanUjianUmum.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./HalamanUjianUmum.vue?vue&type=style&index=0&id=cfbc7e30&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["toObject","toAbsoluteIndex","lengthOfArrayLike","module","exports","value","O","this","length","argumentsLength","arguments","index","undefined","end","endPos","aCallable","IndexedObject","$TypeError","TypeError","createMethod","IS_RIGHT","that","callbackfn","memo","self","i","left","right","$","fill","addToUnscopables","target","proto","$reduce","arrayMethodIsStrict","CHROME_VERSION","IS_NODE","CHROME_BUG","FORCED","forced","reduce","db","getFirestore","firebaseApp","auth","getAuth","route","useRoute","router","useRouter","jadwalId","ref","params","questions","currentQuestionIndex","answers","score","toast","isOpen","message","duration","color","timer","intervalId","hasTakenExam","isModalOpen","isAlertOpen","initialDuration","formatTime","seconds","minutes","Math","floor","secs","concat","toString","padStart","checkExamStatus","savedScore","localStorage","getItem","fetchQuestions","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","user","jadwalDoc","jadwalData","questionsSnapshot","savedAnswers","wrap","_context","prev","next","currentUser","console","error","abrupt","getDoc","doc","sent","exists","data","getDocs","collection","docs","map","_objectSpread","id","filter","question","soal","includes","durasi","JSON","parse","Array","startTimer","t0","stop","apply","setInterval","clearInterval","finishExam","resetExam","removeItem","nextQuestion","calculateScore","setItem","correctAnswers","acc","correctAnswer","round","storeScoreAndGoHome","_ref2","_callee2","_context2","setDoc","uid","userId","createdAt","serverTimestamp","showToast","push","selectOption","option","onMounted","watchEffect","goHome","__exports__"],"sourceRoot":""}