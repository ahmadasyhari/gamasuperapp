"use strict";(self["webpackChunkresep_bunda"]=self["webpackChunkresep_bunda"]||[]).push([[924],{1285:(e,n,t)=>{var u=t(7908),a=t(1400),l=t(6244);e.exports=function(e){var n=u(this),t=l(n),r=arguments.length,i=a(r>1?arguments[1]:void 0,t),o=r>2?arguments[2]:void 0,c=void 0===o?t:a(o,t);while(c>i)n[i++]=e;return n}},3671:(e,n,t)=>{var u=t(9662),a=t(7908),l=t(8361),r=t(6244),i=TypeError,o=function(e){return function(n,t,o,c){u(t);var s=a(n),f=l(s),d=r(s),v=e?d-1:0,m=e?-1:1;if(o<2)while(1){if(v in f){c=f[v],v+=m;break}if(v+=m,e?v<0:d<=v)throw i("Reduce of empty array with no initial value")}for(;e?v>=0:d>v;v+=m)v in f&&(c=t(c,f[v],v,s));return c}};e.exports={left:o(!1),right:o(!0)}},3290:(e,n,t)=>{var u=t(2109),a=t(1285),l=t(1223);u({target:"Array",proto:!0},{fill:a}),l("fill")},5827:(e,n,t)=>{var u=t(2109),a=t(3671).left,l=t(2133),r=t(7392),i=t(5268),o=!i&&r>79&&r<83,c=o||!l("reduce");u({target:"Array",proto:!0,forced:c},{reduce:function(e){var n=arguments.length;return a(this,e,n,n>1?arguments[1]:void 0)}})},924:(e,n,t)=>{t.r(n),t.d(n,{default:()=>x});var u=t(124),a=t(3144),l=t(8534),r=(t(2222),t(3112),t(6647),t(3710),t(1539),t(9714),t(7327),t(1249),t(6699),t(2023),t(7941),t(3290),t(2564),t(5827),t(7658),t(6252)),i=t(2262),o=t(3577),c=t(86),s=t(6100),f=t(2201),d=t(316),v=t(5856),m={key:0,class:"image-grid"},w={key:0},U={class:"timer-badge"},p=["innerHTML"],k={key:0},g={key:1},S=["src"],_={class:"options"};const h={__name:"HalamanUjianUmum",setup:function(e){var n=(0,s.ad)(v.H),t=(0,d.v0)(v.H),h=(0,f.yj)(),W=(0,f.tv)(),x=(0,i.iH)(h.params.jadwalId),b=(0,i.iH)([]),y=(0,i.iH)(0),H=(0,i.iH)([]),j=(0,i.iH)(0),D=(0,i.iH)({isOpen:!1,message:"",duration:2e3,color:"success"}),C=(0,i.iH)(0),I=(0,i.iH)(null),M=(0,i.iH)(!1),q=(0,i.iH)(!1),G=(0,i.iH)(!1),Z=0,A=function(e){var n=Math.floor(e/60),t=e%60;return"".concat(n.toString().padStart(2,"0"),":").concat(t.toString().padStart(2,"0"))},N=function(){var e=localStorage.getItem("score_".concat(x.value));e&&(j.value=e,M.value=!0,G.value=!0)},P=function(){var e=(0,l.Z)((0,u.Z)().mark((function e(){var l,r,i,o,c;return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(l=t.currentUser,!l){e.next=30;break}if(x.value){e.next=5;break}return console.error("jadwalId is undefined"),e.abrupt("return");case 5:return e.prev=5,e.next=8,(0,s.QT)((0,s.JU)(n,"jadwalcpns",x.value));case 8:if(r=e.sent,!r.exists()){e.next=22;break}return i=r.data(),e.next=13,(0,s.PL)((0,s.hJ)(n,"soalcpns"));case 13:o=e.sent,b.value=o.docs.map((function(e){return(0,a.Z)({id:e.id},e.data())})).filter((function(e){return i.soal&&i.soal.includes(e.id)})),Z=60*i.durasi,C.value=Z,c=JSON.parse(localStorage.getItem("answers_".concat(x.value))),H.value=c||new Array(b.value.length).fill(""),Y(),e.next=23;break;case 22:console.error("jadwalDoc does not exist");case 23:e.next=28;break;case 25:e.prev=25,e.t0=e["catch"](5),console.error("Error fetching documents:",e.t0);case 28:e.next=31;break;case 30:console.error("User is not authenticated");case 31:case"end":return e.stop()}}),e,null,[[5,25]])})));return function(){return e.apply(this,arguments)}}(),Y=function(){I.value=setInterval((function(){C.value>0?C.value--:(clearInterval(I.value),T())}),1e3)},z=function(){y.value=0,H.value=new Array(b.value.length).fill(""),C.value=Z,M.value=!1,clearInterval(I.value),Y(),localStorage.removeItem("score_".concat(x.value))},O=function(){y.value<b.value.length-1?y.value++:T()},T=function(){F(),G.value=!0,localStorage.setItem("score_".concat(x.value),j.value),M.value=!0},F=function(){var e=b.value.reduce((function(e,n,t){return n.correctAnswer===H.value[t]?e+1:e}),0);j.value=Math.round(e/b.value.length*100)},J=function(){var e=(0,l.Z)((0,u.Z)().mark((function e(){var a;return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.currentUser,!a){e.next=13;break}return e.prev=2,e.next=5,(0,s.pl)((0,s.JU)(n,"examResults/".concat(a.uid,"/results"),x.value),{userId:a.uid,jadwalId:x.value,score:j.value,createdAt:(0,s.Bt)()});case 5:Q("Nilai berhasil disimpan!","success"),W.push("/"),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](2),console.error("Error saving score:",e.t0),Q("Gagal menyimpan nilai.","danger");case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),K=function(e){H.value[y.value]=e},Q=function(e,n){D.value={isOpen:!0,message:e,duration:2e3,color:n}};(0,r.bv)((function(){N(),P()})),(0,r.m0)((function(){N()}));var E=function(){W.push("/")};return function(e,n){var t=(0,r.up)("ion-spinner");return(0,r.wg)(),(0,r.j4)((0,i.SU)(c._i),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,i.SU)(c.Gu),{mode:"ios"},{default:(0,r.w5)((function(){return[(0,r.Wm)((0,i.SU)(c.sr),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,i.SU)(c.wd),null,{default:(0,r.w5)((function(){return[(0,r.Uk)("Halaman Ujian Umum")]})),_:1}),(0,r.Wm)((0,i.SU)(c.oU),{slot:"start","default-href":"/",disabled:""})]})),_:1})]})),_:1}),(0,r.Wm)((0,i.SU)(c.W2),{fullscreen:!0,class:"exam-page"},{default:(0,r.w5)((function(){return[(0,r.Wm)((0,i.SU)(c.W2),{class:"ion-padding"},{default:(0,r.w5)((function(){return[(0,r.Wm)((0,i.SU)(c.PM),{style:{"background-color":"#faf8f2"}},{default:(0,r.w5)((function(){return[b.value.length>0&&!e.loading?((0,r.wg)(),(0,r.iD)("div",m,[M.value?((0,r.wg)(),(0,r.j4)((0,i.SU)(c.PM),{key:0,class:"ion-text-center"},{default:(0,r.w5)((function(){return[(0,r.Wm)((0,i.SU)(c.Zi),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,i.SU)(c.Dq),null,{default:(0,r.w5)((function(){return[(0,r.Uk)("Hasil Ujian")]})),_:1})]})),_:1}),(0,r.Wm)((0,i.SU)(c.FN),null,{default:(0,r.w5)((function(){return[(0,r._)("p",null,[(0,r.Uk)("Nilai Anda: "),(0,r._)("strong",null,(0,o.zw)(j.value),1)]),(0,r.Wm)((0,i.SU)(c.YG),{expand:"block",color:"success",onClick:E,style:{"margin-top":"10px"}},{default:(0,r.w5)((function(){return[(0,r.Uk)(" Kembali ke Halaman Utama ")]})),_:1}),(0,r.Wm)((0,i.SU)(c.YG),{expand:"block",color:"warning",onClick:z,style:{"margin-top":"10px"}},{default:(0,r.w5)((function(){return[(0,r.Uk)(" Ujian Ulang ")]})),_:1})]})),_:1})]})),_:1})):(0,r.kq)("",!0)])):(0,r.kq)("",!0),e.loading?((0,r.wg)(),(0,r.j4)(t,{key:1,name:"crescent"})):(0,r.kq)("",!0)]})),_:1}),!M.value&&y.value<b.value.length?((0,r.wg)(),(0,r.iD)("div",w,[(0,r.Wm)((0,i.SU)(c.YG),{style:{color:"white"},expand:"block",onClick:e.openQuestionModal},{default:(0,r.w5)((function(){return[(0,r.Uk)(" Pilih Soal ")]})),_:1},8,["onClick"]),(0,r.Wm)((0,i.SU)(c.PM),null,{default:(0,r.w5)((function(){return[(0,r._)("div",U,[(0,r.Wm)((0,i.SU)(c.yp),{style:{color:"white"}},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,o.zw)(A(C.value)),1)]})),_:1})]),(0,r.Wm)((0,i.SU)(c.Zi),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,i.SU)(c.Dq),null,{default:(0,r.w5)((function(){return[(0,r._)("div",{innerHTML:b.value[y.value].question},null,8,p)]})),_:1})]})),_:1}),(0,r.Wm)((0,i.SU)(c.FN),null,{default:(0,r.w5)((function(){return[b.value[y.value].imageUrl?((0,r.wg)(),(0,r.iD)("div",k,[(0,r.Wm)((0,i.SU)(c.Xz),{src:b.value[y.value].imageUrl},null,8,["src"])])):(0,r.kq)("",!0),b.value[y.value].videoUrl?((0,r.wg)(),(0,r.iD)("div",g,[(0,r._)("video",{src:b.value[y.value].videoUrl,controls:""},null,8,S)])):(0,r.kq)("",!0)]})),_:1})]})),_:1}),(0,r._)("div",_,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(b.value[y.value].options,(function(e,n){return(0,r.wg)(),(0,r.j4)((0,i.SU)(c.PM),{key:n,onClick:function(e){return K(n)},class:(0,o.C_)({selected:H.value[y.value]===n})},{default:(0,r.w5)((function(){return[(0,r.Wm)((0,i.SU)(c.FN),null,{default:(0,r.w5)((function(){return[(0,r.Uk)((0,o.zw)(e),1)]})),_:2},1024)]})),_:2},1032,["onClick","class"])})),128))]),(0,r.Wm)((0,i.SU)(c.YG),{style:{color:"white"},expand:"block",onClick:O},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,o.zw)(y.value===b.value.length-1?"Finish":"Next"),1)]})),_:1})])):(0,r.kq)("",!0)]})),_:1}),(0,r.Wm)((0,i.SU)(c.Ge),{"is-open":G.value,header:"Hasil Ujian",message:"Nilai Anda: "+j.value,buttons:[{text:"OK",handler:J},{text:"Ujian Ulang",handler:z}],onDidDismiss:n[0]||(n[0]=function(){return G.value=!1})},null,8,["is-open","message","buttons"]),(0,r.Wm)((0,i.SU)(c.Px),{"is-open":D.value.isOpen,message:D.value.message,duration:D.value.duration,color:D.value.color,onDidDismiss:n[1]||(n[1]=function(){return D.value.isOpen=!1})},null,8,["is-open","message","duration","color"]),(0,r.Wm)((0,i.SU)(c.ki),{"is-open":q.value,onDidDismiss:e.closeModal},{default:(0,r.w5)((function(){return[(0,r.Wm)((0,i.SU)(c.Gu),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,i.SU)(c.sr),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,i.SU)(c.wd),null,{default:(0,r.w5)((function(){return[(0,r.Uk)("Pilih Soal")]})),_:1}),(0,r.Wm)((0,i.SU)(c.Sm),{slot:"end"},{default:(0,r.w5)((function(){return[(0,r.Wm)((0,i.SU)(c.YG),{onClick:e.closeModal},{default:(0,r.w5)((function(){return[(0,r.Uk)("Tutup")]})),_:1},8,["onClick"])]})),_:1})]})),_:1})]})),_:1}),(0,r.Wm)((0,i.SU)(c.W2),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,i.SU)(c.q_),null,{default:(0,r.w5)((function(){return[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(b.value,(function(n,t){return(0,r.wg)(),(0,r.j4)((0,i.SU)(c.Ie),{key:t,onClick:function(n){return e.jumpToQuestion(t)}},{default:(0,r.w5)((function(){return[(0,r.Wm)((0,i.SU)(c.Q$),null,{default:(0,r.w5)((function(){return[(0,r.Uk)("Soal "+(0,o.zw)(t+1),1)]})),_:2},1024)]})),_:2},1032,["onClick"])})),128))]})),_:1})]})),_:1})]})),_:1},8,["is-open","onDidDismiss"])]})),_:1})]})),_:1})}}},W=h,x=W}}]);
//# sourceMappingURL=924.08cf2761.js.map