{"version":3,"file":"js/6317.1b579c26.js","mappings":"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","sources":["webpack://resep-bunda/./src/views/user/JadwalUjian.vue","webpack://resep-bunda/./src/views/user/JadwalUjian.vue?6ac8"],"sourcesContent":["<template>\n  <ion-page>\n    <ion-header mode=\"ios\">\n      <ion-toolbar>\n        <ion-title>Jadwal Ujian</ion-title>\n        <ion-back-button slot=\"start\" default-href=\"/\" />\n      </ion-toolbar>\n    </ion-header>\n    <ion-content :fullscreen=\"true\">\n      <ion-content class=\"ion-padding\">\n        <ion-row>\n          <ion-col v-for=\"jadwal in filteredJadwalUjian\" :key=\"jadwal.id\">\n            <ion-card @click=\"checkExamStatus(jadwal)\">\n              <ion-card-header>\n                <ion-card-title\n                  >Ujian Mata Pelajaran {{ jadwal.subjectName }}</ion-card-title\n                >\n              </ion-card-header>\n              <ion-card-content>\n                <p>Kelas: {{ jadwal.className }}</p>\n                <p>Durasi: {{ jadwal.durasi }} Menit</p>\n                <p>Tanggal Ujian: {{ formatDate(jadwal.tanggalUjian) }}</p>\n              </ion-card-content>\n            </ion-card>\n          </ion-col>\n        </ion-row>\n      </ion-content>\n      <ion-toast\n        :is-open=\"toast.isOpen\"\n        :message=\"toast.message\"\n        :duration=\"toast.duration\"\n        :color=\"toast.color\"\n        @did-dismiss=\"() => (toast.isOpen = false)\"\n      ></ion-toast>\n    </ion-content>\n  </ion-page>\n</template>\n\n<script setup>\nimport {\n  IonPage,\n  IonHeader,\n  IonToolbar,\n  IonTitle,\n  IonContent,\n  IonToast,\n  IonBackButton,\n  IonRow,\n  IonCol,\n  IonCard,\n  IonCardHeader,\n  IonCardTitle,\n  IonCardContent,\n} from \"@ionic/vue\";\nimport { ref, onMounted, computed } from \"vue\";\nimport {\n  getFirestore,\n  collection,\n  getDocs,\n  doc,\n  getDoc,\n  query,\n  where,\n} from \"firebase/firestore\";\nimport { getAuth } from \"firebase/auth\";\nimport { useRouter } from \"vue-router\";\nimport { firebaseApp } from \"../firebase.js\";\n\nconst db = getFirestore(firebaseApp);\nconst auth = getAuth(firebaseApp);\nconst router = useRouter();\nconst jadwalUjian = ref([]);\nconst userClass = ref(\"\");\nconst examResults = ref([]);\nconst classes = ref([]);\nconst subjects = ref([]);\nconst toast = ref({\n  isOpen: false,\n  message: \"\",\n  duration: 2000,\n  color: \"success\",\n});\n\nconst fetchUserClass = async () => {\n  const user = auth.currentUser;\n  if (user) {\n    const userDoc = await getDoc(doc(db, \"users\", user.uid));\n    if (userDoc.exists()) {\n      userClass.value = userDoc.data().kelas; // Mengambil nilai dari kolom 'kelas'\n    }\n  }\n};\n\nconst fetchClasses = async () => {\n  const querySnapshot = await getDocs(collection(db, \"kelas\"));\n  classes.value = querySnapshot.docs.map((doc) => ({\n    id: doc.id,\n    ...doc.data(),\n  }));\n};\n\nconst fetchSubjects = async () => {\n  const querySnapshot = await getDocs(collection(db, \"mataPelajaran\"));\n  subjects.value = querySnapshot.docs.map((doc) => ({\n    id: doc.id,\n    ...doc.data(),\n  }));\n};\n\nconst fetchJadwalUjian = async () => {\n  const querySnapshot = await getDocs(collection(db, \"jadwal\"));\n  jadwalUjian.value = querySnapshot.docs.map((doc) => {\n    const data = doc.data();\n    const classData = classes.value.find((kelas) => kelas.id === data.kelas);\n    const subjectData = subjects.value.find(\n      (subject) => subject.id === data.mataPelajaran\n    );\n    return {\n      id: doc.id,\n      ...data,\n      className: classData ? classData.name : \"N/A\",\n      subjectName: subjectData ? subjectData.name : \"N/A\",\n    };\n  });\n};\n\nconst fetchExamResults = async () => {\n  const user = auth.currentUser;\n  if (user) {\n    const q = query(\n      collection(db, \"examResults\"),\n      where(\"userId\", \"==\", user.uid)\n    );\n    const querySnapshot = await getDocs(q);\n    examResults.value = querySnapshot.docs.map((doc) => ({\n      id: doc.id,\n      ...doc.data(),\n    }));\n  }\n};\n\nconst checkExamStatus = (jadwal) => {\n  if (jadwal.aktif) {\n    goToUjian(jadwal.id);\n  } else {\n    showToast(\"Ujian belum dimulai.\", \"warning\");\n  }\n};\n\nconst goToUjian = (jadwalId) => {\n  if (hasTakenExam(jadwalId)) {\n    showToast(\"Anda sudah melakukan ujian ini.\", \"danger\");\n    router.push({ name: \"lihathasilujianUser\" });\n  } else {\n    router.push({ name: \"halamanujianUser\", params: { jadwalId } });\n  }\n};\n\nconst formatDate = (timestamp) => {\n  if (!timestamp) return \"N/A\";\n  let date;\n  if (timestamp.seconds) {\n    date = new Date(timestamp.seconds * 1000);\n  } else if (typeof timestamp === \"string\" || timestamp instanceof Date) {\n    date = new Date(timestamp);\n  } else {\n    return \"Invalid Date\";\n  }\n  return date.toLocaleDateString(\"id-ID\", {\n    year: \"numeric\",\n    month: \"short\",\n    day: \"numeric\",\n  });\n};\n\nconst hasTakenExam = (jadwalId) => {\n  return examResults.value.some((result) => result.jadwalId === jadwalId);\n};\n\nconst filteredJadwalUjian = computed(() => {\n  return jadwalUjian.value.filter((jadwal) => jadwal.kelas === userClass.value);\n});\n\nonMounted(async () => {\n  await fetchClasses(); // Fetch classes first\n  await fetchSubjects(); // Fetch subjects first\n  await fetchUserClass();\n  await fetchJadwalUjian();\n  await fetchExamResults();\n});\n\nconst showToast = (message, color) => {\n  toast.value = {\n    isOpen: true,\n    message,\n    duration: 2000,\n    color,\n  };\n};\n</script>\n\n<style scoped>\n/* Custom styling if needed */\n</style>\n","import script from \"./JadwalUjian.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./JadwalUjian.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./JadwalUjian.vue?vue&type=style&index=0&id=50f818bf&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-50f818bf\"]])\n\nexport default __exports__"],"names":["db","getFirestore","firebaseApp","auth","getAuth","router","useRouter","jadwalUjian","ref","userClass","examResults","classes","subjects","toast","isOpen","message","duration","color","fetchUserClass","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","user","userDoc","wrap","_context","prev","next","currentUser","getDoc","doc","uid","sent","exists","value","data","kelas","stop","apply","arguments","fetchClasses","_ref2","_callee2","querySnapshot","_context2","getDocs","collection","docs","map","_objectSpread","id","fetchSubjects","_ref3","_callee3","_context3","fetchJadwalUjian","_ref4","_callee4","_context4","classData","find","subjectData","subject","mataPelajaran","className","name","subjectName","fetchExamResults","_ref5","_callee5","q","_context5","query","where","checkExamStatus","jadwal","aktif","goToUjian","showToast","jadwalId","hasTakenExam","push","params","formatDate","timestamp","date","seconds","Date","toLocaleDateString","year","month","day","some","result","filteredJadwalUjian","computed","filter","onMounted","_callee6","_context6","__exports__"],"sourceRoot":""}