{"version":3,"file":"js/317.fae2b241.js","mappings":"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","sources":["webpack://resep-bunda/./node_modules/core-js/modules/es.array.some.js","webpack://resep-bunda/./src/views/user/JadwalUjian.vue","webpack://resep-bunda/./src/views/user/JadwalUjian.vue?6ac8"],"sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar $some = require('../internals/array-iteration').some;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar STRICT_METHOD = arrayMethodIsStrict('some');\n\n// `Array.prototype.some` method\n// https://tc39.es/ecma262/#sec-array.prototype.some\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD }, {\n  some: function some(callbackfn /* , thisArg */) {\n    return $some(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","<template>\n  <ion-page>\n    <ion-header mode=\"ios\">\n      <ion-toolbar>\n        <ion-title>Jadwal Ujian</ion-title>\n        <ion-back-button slot=\"start\" default-href=\"/\" />\n      </ion-toolbar>\n    </ion-header>\n    <ion-content :fullscreen=\"true\">\n      <ion-content class=\"ion-padding\">\n        <ion-row>\n          <ion-col v-for=\"jadwal in filteredJadwalUjian\" :key=\"jadwal.id\">\n            <ion-card @click=\"checkExamStatus(jadwal)\">\n              <ion-card-header>\n                <ion-card-title\n                  >Ujian Mata Pelajaran {{ jadwal.subjectName }}</ion-card-title\n                >\n              </ion-card-header>\n              <ion-card-content>\n                <p>Kelas: {{ jadwal.className }}</p>\n                <p>Durasi: {{ jadwal.durasi }} Menit</p>\n                <p>Tanggal Ujian: {{ formatDate(jadwal.tanggalUjian) }}</p>\n              </ion-card-content>\n            </ion-card>\n          </ion-col>\n        </ion-row>\n      </ion-content>\n      <ion-toast\n        :is-open=\"toast.isOpen\"\n        :message=\"toast.message\"\n        :duration=\"toast.duration\"\n        :color=\"toast.color\"\n        @did-dismiss=\"() => (toast.isOpen = false)\"\n      ></ion-toast>\n    </ion-content>\n  </ion-page>\n</template>\n\n<script setup>\nimport {\n  IonPage,\n  IonHeader,\n  IonToolbar,\n  IonTitle,\n  IonContent,\n  IonToast,\n  IonBackButton,\n  IonRow,\n  IonCol,\n  IonCard,\n  IonCardHeader,\n  IonCardTitle,\n  IonCardContent,\n} from \"@ionic/vue\";\nimport { ref, onMounted, computed } from \"vue\";\nimport {\n  getFirestore,\n  collection,\n  getDocs,\n  doc,\n  getDoc,\n  query,\n  where,\n} from \"firebase/firestore\";\nimport { getAuth } from \"firebase/auth\";\nimport { useRouter } from \"vue-router\";\nimport { firebaseApp } from \"../firebase.js\";\n\nconst db = getFirestore(firebaseApp);\nconst auth = getAuth(firebaseApp);\nconst router = useRouter();\nconst jadwalUjian = ref([]);\nconst userClass = ref(\"\");\nconst examResults = ref([]);\nconst classes = ref([]);\nconst subjects = ref([]);\nconst toast = ref({\n  isOpen: false,\n  message: \"\",\n  duration: 2000,\n  color: \"success\",\n});\n\nconst fetchUserClass = async () => {\n  const user = auth.currentUser;\n  if (user) {\n    const userDoc = await getDoc(doc(db, \"users\", user.uid));\n    if (userDoc.exists()) {\n      userClass.value = userDoc.data().kelas; // Mengambil nilai dari kolom 'kelas'\n    }\n  }\n};\n\nconst fetchClasses = async () => {\n  const querySnapshot = await getDocs(collection(db, \"kelas\"));\n  classes.value = querySnapshot.docs.map((doc) => ({\n    id: doc.id,\n    ...doc.data(),\n  }));\n};\n\nconst fetchSubjects = async () => {\n  const querySnapshot = await getDocs(collection(db, \"mataPelajaran\"));\n  subjects.value = querySnapshot.docs.map((doc) => ({\n    id: doc.id,\n    ...doc.data(),\n  }));\n};\n\nconst fetchJadwalUjian = async () => {\n  const querySnapshot = await getDocs(collection(db, \"jadwal\"));\n  jadwalUjian.value = querySnapshot.docs.map((doc) => {\n    const data = doc.data();\n    const classData = classes.value.find((kelas) => kelas.id === data.kelas);\n    const subjectData = subjects.value.find(\n      (subject) => subject.id === data.mataPelajaran\n    );\n    return {\n      id: doc.id,\n      ...data,\n      className: classData ? classData.name : \"N/A\",\n      subjectName: subjectData ? subjectData.name : \"N/A\",\n    };\n  });\n};\n\nconst fetchExamResults = async () => {\n  const user = auth.currentUser;\n  if (user) {\n    const q = query(\n      collection(db, \"examResults\"),\n      where(\"userId\", \"==\", user.uid)\n    );\n    const querySnapshot = await getDocs(q);\n    examResults.value = querySnapshot.docs.map((doc) => ({\n      id: doc.id,\n      ...doc.data(),\n    }));\n  }\n};\n\nconst checkExamStatus = (jadwal) => {\n  if (jadwal.aktif) {\n    goToUjian(jadwal.id);\n  } else {\n    showToast(\"Ujian belum dimulai.\", \"warning\");\n  }\n};\n\nconst goToUjian = (jadwalId) => {\n  if (hasTakenExam(jadwalId)) {\n    showToast(\"Anda sudah melakukan ujian ini.\", \"danger\");\n    router.push({ name: \"lihathasilujianUser\" });\n  } else {\n    router.push({ name: \"halamanujianUser\", params: { jadwalId } });\n  }\n};\n\nconst formatDate = (timestamp) => {\n  if (!timestamp) return \"N/A\";\n  let date;\n  if (timestamp.seconds) {\n    date = new Date(timestamp.seconds * 1000);\n  } else if (typeof timestamp === \"string\" || timestamp instanceof Date) {\n    date = new Date(timestamp);\n  } else {\n    return \"Invalid Date\";\n  }\n  return date.toLocaleDateString(\"id-ID\", {\n    year: \"numeric\",\n    month: \"short\",\n    day: \"numeric\",\n  });\n};\n\nconst hasTakenExam = (jadwalId) => {\n  return examResults.value.some((result) => result.jadwalId === jadwalId);\n};\n\nconst filteredJadwalUjian = computed(() => {\n  return jadwalUjian.value.filter((jadwal) => jadwal.kelas === userClass.value);\n});\n\nonMounted(async () => {\n  await fetchClasses(); // Fetch classes first\n  await fetchSubjects(); // Fetch subjects first\n  await fetchUserClass();\n  await fetchJadwalUjian();\n  await fetchExamResults();\n});\n\nconst showToast = (message, color) => {\n  toast.value = {\n    isOpen: true,\n    message,\n    duration: 2000,\n    color,\n  };\n};\n</script>\n\n<style scoped>\n/* Custom styling if needed */\n</style>\n","import script from \"./JadwalUjian.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./JadwalUjian.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./JadwalUjian.vue?vue&type=style&index=0&id=50f818bf&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-50f818bf\"]])\n\nexport default __exports__"],"names":["$","$some","arrayMethodIsStrict","STRICT_METHOD","target","proto","forced","some","callbackfn","this","arguments","length","undefined","db","getFirestore","firebaseApp","auth","getAuth","router","useRouter","jadwalUjian","ref","userClass","examResults","classes","subjects","toast","isOpen","message","duration","color","fetchUserClass","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","user","userDoc","wrap","_context","prev","next","currentUser","getDoc","doc","uid","sent","exists","value","data","kelas","stop","apply","fetchClasses","_ref2","_callee2","querySnapshot","_context2","getDocs","collection","docs","map","_objectSpread","id","fetchSubjects","_ref3","_callee3","_context3","fetchJadwalUjian","_ref4","_callee4","_context4","classData","find","subjectData","subject","mataPelajaran","className","name","subjectName","fetchExamResults","_ref5","_callee5","q","_context5","query","where","checkExamStatus","jadwal","aktif","goToUjian","showToast","jadwalId","hasTakenExam","push","params","formatDate","timestamp","date","seconds","Date","toLocaleDateString","year","month","day","result","filteredJadwalUjian","computed","filter","onMounted","_callee6","_context6","__exports__"],"sourceRoot":""}