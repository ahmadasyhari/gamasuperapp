{"version":3,"file":"js/148.cbda01e2.js","mappings":"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","sources":["webpack://resep-bunda/./node_modules/core-js/internals/string-trim-forced.js","webpack://resep-bunda/./node_modules/core-js/modules/es.string.trim.js","webpack://resep-bunda/./src/views/user/HalamanSetting.vue","webpack://resep-bunda/./src/views/user/HalamanSetting.vue?3af9"],"sourcesContent":["'use strict';\nvar PROPER_FUNCTION_NAME = require('../internals/function-name').PROPER;\nvar fails = require('../internals/fails');\nvar whitespaces = require('../internals/whitespaces');\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]()\n      || non[METHOD_NAME]() !== non\n      || (PROPER_FUNCTION_NAME && whitespaces[METHOD_NAME].name !== METHOD_NAME);\n  });\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $trim = require('../internals/string-trim').trim;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\n// `String.prototype.trim` method\n// https://tc39.es/ecma262/#sec-string.prototype.trim\n$({ target: 'String', proto: true, forced: forcedStringTrimMethod('trim') }, {\n  trim: function trim() {\n    return $trim(this);\n  }\n});\n","<template>\r\n  <ion-page>\r\n    <ion-header mode=\"ios\">\r\n      <ion-toolbar>\r\n        <ion-title>Pengaturan</ion-title>\r\n        <ion-back-button slot=\"start\" default-href=\"/\" />\r\n      </ion-toolbar>\r\n    </ion-header>\r\n    <ion-content :fullscreen=\"true\">\r\n      <ion-refresher slot=\"fixed\" @ionRefresh=\"doRefresh($event)\">\r\n        <ion-refresher-content />\r\n      </ion-refresher>\r\n      <ion-content class=\"ion-padding\">\r\n        <!-- Profile Picture -->\r\n        <div class=\"profile-picture-container\">\r\n          <img\r\n            :src=\"profilePicture || defaultAvatar\"\r\n            alt=\"Profile Picture\"\r\n            class=\"profile-picture\"\r\n          />\r\n          <label for=\"file-upload\" class=\"upload-button\"\r\n            >Ganti Foto Profil</label\r\n          >\r\n          <input\r\n            id=\"file-upload\"\r\n            type=\"file\"\r\n            @change=\"uploadProfilePicture\"\r\n            accept=\"image/*\"\r\n          />\r\n        </div>\r\n        <!-- User Information -->\r\n        <ion-item>\r\n          <ion-label position=\"floating\">Nama Lengkap</ion-label>\r\n          <ion-input v-model=\"fullName\"></ion-input>\r\n        </ion-item>\r\n        <ion-item>\r\n          <ion-label position=\"floating\">Email</ion-label>\r\n          <ion-input v-model=\"email\" type=\"email\"></ion-input>\r\n        </ion-item>\r\n        <ion-item>\r\n          <ion-label position=\"floating\">Username</ion-label>\r\n          <ion-input v-model=\"username\"></ion-input>\r\n        </ion-item>\r\n        <ion-item>\r\n          <ion-label position=\"floating\">NISN</ion-label>\r\n          <ion-input v-model=\"nisn\"></ion-input>\r\n        </ion-item>\r\n        <ion-item>\r\n          <ion-label position=\"floating\">Nama Sekolah</ion-label>\r\n          <ion-input v-model=\"schoolName\"></ion-input>\r\n        </ion-item>\r\n        <ion-item>\r\n          <ion-label position=\"floating\">Kelas</ion-label>\r\n          <ion-select\r\n            v-model=\"userClass\"\r\n            placeholder=\"Pilih Kelas\"\r\n            :disabled=\"isClassLocked\"\r\n            @ionChange=\"checkClassChange\"\r\n          >\r\n            <ion-select-option\r\n              v-for=\"kelas in classes\"\r\n              :key=\"kelas.id\"\r\n              :value=\"kelas.id\"\r\n            >\r\n              {{ kelas.name }}\r\n            </ion-select-option>\r\n          </ion-select>\r\n        </ion-item>\r\n        <ion-item>\r\n          <ion-label position=\"floating\">Role</ion-label>\r\n          <ion-input v-model=\"role\" readonly></ion-input>\r\n        </ion-item>\r\n        <ion-button style=\"color: white\" @click=\"updateUserInfo\" expand=\"block\"\r\n          >Perbarui Informasi Pengguna</ion-button\r\n        >\r\n        <!-- QR Code Registration -->\r\n        <ion-item>\r\n          <ion-label position=\"floating\">Kode QR</ion-label>\r\n          <ion-input\r\n            v-model=\"qrCode\"\r\n            placeholder=\"Hasil scan QR Code\"\r\n            readonly\r\n          ></ion-input>\r\n        </ion-item>\r\n        <ion-button style=\"color: white\" @click=\"scanQRCode\" expand=\"block\"\r\n          >Scan QR Code</ion-button\r\n        >\r\n        <ion-button style=\"color: white\" @click=\"registerQRCode\" expand=\"block\"\r\n          >Daftarkan Kode QR</ion-button\r\n        >\r\n      </ion-content>\r\n      <ion-grid class=\"ion-padding\">\r\n        <!-- Additional content for the grid can be added here -->\r\n      </ion-grid>\r\n      <ion-toast\r\n        :is-open=\"toast.isOpen\"\r\n        :message=\"toast.message\"\r\n        :duration=\"toast.duration\"\r\n        :color=\"toast.color\"\r\n        @did-dismiss=\"() => (toast.isOpen = false)\"\r\n      ></ion-toast>\r\n    </ion-content>\r\n  </ion-page>\r\n</template>\r\n\r\n<script setup>\r\nimport {\r\n  IonPage,\r\n  IonHeader,\r\n  IonToolbar,\r\n  IonTitle,\r\n  IonBackButton,\r\n  IonContent,\r\n  IonRefresher,\r\n  IonRefresherContent,\r\n  IonGrid,\r\n  IonItem,\r\n  IonLabel,\r\n  IonInput,\r\n  IonSelect,\r\n  IonSelectOption,\r\n  IonButton,\r\n  IonToast,\r\n} from \"@ionic/vue\";\r\nimport { ref, onMounted } from \"vue\";\r\nimport {\r\n  getFirestore,\r\n  doc,\r\n  getDoc,\r\n  updateDoc,\r\n  getDocs,\r\n  collection,\r\n} from \"firebase/firestore\";\r\nimport { getAuth } from \"firebase/auth\";\r\nimport {\r\n  getStorage,\r\n  ref as storageRef,\r\n  uploadBytes,\r\n  getDownloadURL,\r\n} from \"firebase/storage\";\r\nimport { BarcodeScanner } from \"@capacitor-community/barcode-scanner\";\r\nimport { firebaseApp } from \"../firebase.js\";\r\n\r\nconst defaultAvatar = require(\"@/views/avatar.png\");\r\nconst db = getFirestore(firebaseApp);\r\nconst storage = getStorage(firebaseApp);\r\nconst fullName = ref(\"\");\r\nconst email = ref(\"\");\r\nconst username = ref(\"\");\r\nconst userClass = ref(\"\");\r\nconst role = ref(\"\");\r\nconst qrCode = ref(\"\");\r\nconst profilePicture = ref(defaultAvatar);\r\nconst classes = ref([]);\r\nconst nisn = ref(\"\");\r\nconst schoolName = ref(\"\");\r\nconst isClassLocked = ref(false); // To check if class is locked\r\nconst toast = ref({\r\n  isOpen: false,\r\n  message: \"\",\r\n  duration: 2000,\r\n  color: \"success\",\r\n});\r\n\r\nconst fetchUserData = async () => {\r\n  const auth = getAuth(firebaseApp);\r\n  const user = auth.currentUser;\r\n  if (!user) {\r\n    showToast(\"Pengguna tidak terautentikasi\", \"danger\");\r\n    return;\r\n  }\r\n\r\n  try {\r\n    const userDoc = await getDoc(doc(db, \"users\", user.uid));\r\n    if (userDoc.exists()) {\r\n      const userData = userDoc.data();\r\n      fullName.value = userData.fullName || \"\";\r\n      email.value = userData.email || \"\";\r\n      username.value = userData.username || \"\";\r\n      userClass.value = userData.kelas || \"\";\r\n      role.value = userData.role || \"\";\r\n      profilePicture.value = userData.profilePicture || defaultAvatar;\r\n      qrCode.value = userData.qrCode || \"\";\r\n      nisn.value = userData.nisn || \"\";\r\n      schoolName.value = userData.schoolName || \"\";\r\n      isClassLocked.value = !!userData.kelas; // Lock the class input if a class is already set\r\n    } else {\r\n      showToast(\"Data pengguna tidak ditemukan\", \"danger\");\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error fetching user data:\", error);\r\n    showToast(\"Terjadi kesalahan saat mengambil data pengguna\", \"danger\");\r\n  }\r\n};\r\n\r\nconst fetchClasses = async () => {\r\n  const querySnapshot = await getDocs(collection(db, \"kelas\"));\r\n  classes.value = querySnapshot.docs.map((doc) => ({\r\n    id: doc.id,\r\n    ...doc.data(),\r\n  }));\r\n};\r\n\r\nconst scanQRCode = async () => {\r\n  try {\r\n    await BarcodeScanner.checkPermission({ force: true });\r\n    await BarcodeScanner.hideBackground(); // make background of WebView transparent\r\n    const result = await BarcodeScanner.startScan(); // start scanning and wait for a result\r\n    if (result.hasContent) {\r\n      qrCode.value = result.content; // Save the scanned content to qrCode\r\n      showToast(\"QR Code berhasil dipindai\", \"success\");\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error scanning QR code:\", error);\r\n    showToast(\"Error scanning QR code\", \"danger\");\r\n  } finally {\r\n    BarcodeScanner.showBackground();\r\n    BarcodeScanner.stopScan();\r\n  }\r\n};\r\n\r\nconst registerQRCode = async () => {\r\n  const auth = getAuth(firebaseApp);\r\n  const user = auth.currentUser;\r\n  if (!user) {\r\n    showToast(\"Pengguna tidak terautentikasi\", \"danger\");\r\n    return;\r\n  }\r\n\r\n  if (qrCode.value.trim() === \"\") {\r\n    showToast(\"Kode QR tidak boleh kosong\", \"danger\");\r\n    return;\r\n  }\r\n\r\n  try {\r\n    await updateDoc(doc(db, \"users\", user.uid), {\r\n      qrCode: qrCode.value,\r\n    });\r\n    showToast(\"Kode QR berhasil didaftarkan\", \"success\");\r\n  } catch (error) {\r\n    console.error(\"Error registering QR code:\", error);\r\n    showToast(\"Gagal mendaftarkan kode QR\", \"danger\");\r\n  }\r\n};\r\n\r\nconst updateUserInfo = async () => {\r\n  const auth = getAuth(firebaseApp);\r\n  const user = auth.currentUser;\r\n  if (!user) {\r\n    showToast(\"Pengguna tidak terautentikasi\", \"danger\");\r\n    return;\r\n  }\r\n\r\n  try {\r\n    await updateDoc(doc(db, \"users\", user.uid), {\r\n      fullName: fullName.value,\r\n      email: email.value,\r\n      username: username.value,\r\n      kelas: userClass.value,\r\n      profilePicture: profilePicture.value,\r\n      nisn: nisn.value,\r\n      schoolName: schoolName.value,\r\n    });\r\n    showToast(\"Informasi pengguna berhasil diperbarui\", \"success\");\r\n  } catch (error) {\r\n    console.error(\"Error updating user info:\", error);\r\n    showToast(\"Gagal memperbarui informasi pengguna\", \"danger\");\r\n  }\r\n};\r\n\r\nconst uploadProfilePicture = async (event) => {\r\n  const file = event.target.files[0];\r\n  if (!file) return;\r\n\r\n  const auth = getAuth(firebaseApp);\r\n  const user = auth.currentUser;\r\n  if (!user) {\r\n    showToast(\"Pengguna tidak terautentikasi\", \"danger\");\r\n    return;\r\n  }\r\n\r\n  const storageReference = storageRef(storage, `profile_pictures/${user.uid}`);\r\n  try {\r\n    await uploadBytes(storageReference, file);\r\n    const downloadURL = await getDownloadURL(storageReference);\r\n    profilePicture.value = downloadURL;\r\n    showToast(\"Foto profil berhasil diunggah\", \"success\");\r\n    // Update user document with new profile picture URL\r\n    await updateDoc(doc(db, \"users\", user.uid), {\r\n      profilePicture: downloadURL,\r\n    });\r\n  } catch (error) {\r\n    console.error(\"Error uploading profile picture:\", error);\r\n    showToast(\"Gagal mengunggah foto profil\", \"danger\");\r\n  }\r\n};\r\n\r\nconst checkClassChange = (event) => {\r\n  if (isClassLocked.value) {\r\n    showToast(\"Tidak bisa mengubah kelas. Hubungi admin.\", \"danger\");\r\n    userClass.value = event.target.value;\r\n  }\r\n};\r\n\r\nconst showToast = (message, color) => {\r\n  toast.value = {\r\n    isOpen: true,\r\n    message,\r\n    duration: 2000,\r\n    color,\r\n  };\r\n};\r\n\r\nconst doRefresh = (event) => {\r\n  fetchUserData();\r\n  fetchClasses();\r\n  event.target.complete();\r\n};\r\n\r\nonMounted(() => {\r\n  fetchUserData();\r\n  fetchClasses();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.profile-picture-container {\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.profile-picture {\r\n  width: 150px;\r\n  height: 150px;\r\n  border-radius: 50%;\r\n  object-fit: cover;\r\n}\r\n\r\n.upload-button {\r\n  display: block;\r\n  margin: 10px auto;\r\n  cursor: pointer;\r\n  color: #007bff;\r\n}\r\n\r\n#file-upload {\r\n  display: none;\r\n}\r\n</style>\r\n","import script from \"./HalamanSetting.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./HalamanSetting.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./HalamanSetting.vue?vue&type=style&index=0&id=0f034451&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0f034451\"]])\n\nexport default __exports__"],"names":["PROPER_FUNCTION_NAME","fails","whitespaces","non","module","exports","METHOD_NAME","name","$","$trim","forcedStringTrimMethod","target","proto","forced","trim","this","defaultAvatar","require","db","getFirestore","firebaseApp","storage","getStorage","fullName","ref","email","username","userClass","role","qrCode","profilePicture","classes","nisn","schoolName","isClassLocked","toast","isOpen","message","duration","color","fetchUserData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","auth","user","userDoc","userData","wrap","_context","prev","next","getAuth","currentUser","showToast","abrupt","getDoc","doc","uid","sent","exists","data","value","kelas","t0","console","error","stop","apply","arguments","fetchClasses","_ref2","_callee2","querySnapshot","_context2","getDocs","collection","docs","map","_objectSpread","id","scanQRCode","_ref3","_callee3","result","_context3","BarcodeScanner","checkPermission","force","hideBackground","startScan","hasContent","content","showBackground","stopScan","finish","registerQRCode","_ref4","_callee4","_context4","updateDoc","updateUserInfo","_ref5","_callee5","_context5","uploadProfilePicture","_ref6","_callee6","event","file","storageReference","downloadURL","_context6","files","storageRef","concat","uploadBytes","getDownloadURL","_x","checkClassChange","doRefresh","complete","onMounted","__exports__"],"sourceRoot":""}